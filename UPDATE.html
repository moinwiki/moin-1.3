<html><head>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html;charset=iso-8859-1">
<META NAME="MSSmartTagsPreventParsing" CONTENT="true"><link rel="icon" href="/wikifarm/moin-icon.gif" type="image/gif">
<META NAME="ROBOTS" CONTENT="NOINDEX,NOFOLLOW"><title>HelpOnUpdating - MoinMoin MASTER Wiki</title><meta name="KEYWORDS" content="Help, On, Updating">
<link rel="stylesheet" type="text/css" href="wiki/htdocs/css/moinmoin.css">
<link rel="Start" href="FrontPage">
<link rel="Alternate" title="Wiki Markup" href="HelpOnUpdating?action=raw">
<link rel="Alternate" media="print" title="Print View" href="HelpOnUpdating?action=print">
<link rel="Search" href="FindPage">
<link rel="Index" href="TitleIndex">
<link rel="Glossary" href="WordIndex">
<link rel="Help" href="HelpOnFormatting">
</head>
<body onload="window.defaultStatus='MoinMoin MASTER Wiki'" lang="en" dir="ltr"><a name="top"></a>
<p><a href="http://purl.net/wiki/moinmaster/HelpContents">HelpContents</a> &gt; <a href="http://purl.net/wiki/moinmaster/HelpOnAdministration">HelpOnAdministration</a> &gt; HelpOnUpdating  <p><b>Index</b> <ol><li><a href="#head-61e315ba11650973301814fad5511351f6f9b71a">General procedures</a></li><ol><li><a href="#head-dd96994d01e723dd6f9b0bdb6119722dbeb9faf0">Backup</a></li><li><a href="#head-fd6c3ebf7befca9f8208f86c76e4d4180303745c">Install</a></li><li><a href="#head-469fda7d0fe14908f18ceda7ecc812b3a18d650e">Configuration update</a></li><li><a href="#head-217754d96e10e6cb5c552a8afb72478768e880b9">Updating files</a></li><li><a href="#head-285ec850c11d78bac10f6bfa31b69a37f1b257c9">Troubleshooting</a></li></ol><li><a href="#head-978fb054168faa58843b80a58ab29a3abc33dc1e">Upgrade information for specfic versions</a></li><ol><li><a href="#head-d0b0f515ad64ca357140d4d452724c6892bbe084">Version 0.11</a></li><li><a href="#head-084e67410714ed45209c2fc1829d3b5161821488">Version 1.0</a></li><li><a href="#head-aebe0ed007174f53947b5cc077294c6b536f56d0">Version 1.1</a></li></ol></ol> <p><a name="head-61e315ba11650973301814fad5511351f6f9b71a"></a><H2>1 General procedures</H2>
<p><a name="head-dd96994d01e723dd6f9b0bdb6119722dbeb9faf0"></a><H3>1.1 Backup</H3>
<p><img src="wiki/htdocs/img/alert.gif" width="15" hspace="6" alt="/!\" border="0" height="15"> <b>Before you update an existing wiki, MAKE A BACKUP!</b> You have been warned, and it's not my fault when you end up like this... <img src="wiki/htdocs/img/eek.gif" width="15" hspace="6" alt="@)" border="0" height="15">  <p>There are two directory trees which you should backup: <ul><li> The one containing the <a href="http://purl.net/wiki/moinmaster/MoinMoin">MoinMoin</a> executable files (<tt class="wiki">lib/MoinMoin</tt>) </li><li> and the one containing the data (<tt class="wiki">share/wikiname</tt>/data)  </li></ul><p>The paths depend on your installation. <p><a name="head-fd6c3ebf7befca9f8208f86c76e4d4180303745c"></a><H3>1.2 Install</H3>
<p>Download the <a href="http://purl.net/wiki/moinmaster/MoinMoin">MoinMoin</a> code that you are interested in updating to. <p>As root, run "<tt class="wiki">python&#160;setup.py&#160;install</tt>" to install the new version. <p><a name="head-469fda7d0fe14908f18ceda7ecc812b3a18d650e"></a><H3>1.3 Configuration update</H3>
<p>After upgrading, your existing wiki should continue to work (the goal is to have sane defaults for any new config values, but then there can be bugs). Check that this is indeed the case, and then take the time to check the CHANGES file in your distribution. Often, new features will be invisible unless your extend your configuration in "moin_config.py". <p>This is especially true for: <ul><li> somewhat dangerous macros that won't be activated by default, because they're not advisable for public wikis. You need to explicitely activate those by adding an <tt class="wiki">allowed_actions</tt> list to the config. Currently, the actions <tt class="wiki">DeletePage</tt> and <tt class="wiki">AttachFile</tt> are considered unsafe. </li><li class="gap"> email features: you need to provide <tt class="wiki">mail_smarthost</tt> and <tt class="wiki">mail_from</tt>. </li><li class="gap"> new pages icons: to get new icons like "XML", "Subscribe" etc. it's best to just delete the <tt class="wiki">page_icons</tt> setting, now that "config.py" has a default for it. If you changed it in the past, add new icons from the "config.py" default to your "moin_config.py". </li></ul><p><a name="head-217754d96e10e6cb5c552a8afb72478768e880b9"></a><H3>1.4 Updating files</H3>
<dl><p><dt><b> Images</b></dt><dd>On every update, you should copy the content of the "share/moin/htdocs/img" directory   to the image directory visible to your web server, normally a new release has some new GIFs in it. If you use the default distutils setup scheme, this is no longer necessary (distutils updates the files for you, and your webserver gets the files from the installed images). <p></dd><dt><b> System pages</b></dt><dd>When upgrading to a new version, copy at least the help pages ("Help*") to  your existing directory. Then check whether you miss any new system pages.  <p></dd><dt><b> InterWiki</b></dt><dd>Check that you have the newest entries in the "intermap.txt" file; if you have "private" entries, add them to the distribution file, then copy the result over your current file. Note that starting with version 0.11, you can point "shared_intermap" at a file loaded <em>before</em> the file in your data directory, which takes precedence (i.e. have global entries in the shared one, private entries the data dir file). </dd></dl><p><a name="head-285ec850c11d78bac10f6bfa31b69a37f1b257c9"></a><H3>1.5 Troubleshooting</H3>
<p>To make <a href="http://purl.net/wiki/moinmaster/UserPreferences">UserPreferences</a> work, you should "mkdir -m707 user" in your  "data" directory. A good idea is to do a request for "moin.cgi?test" (which calls an internal diagnosis feature) after  you installed a new release, which will spot some common errors. <p>Depending on your installation, more tightly secured permissions are a good idea.  Ideally, you assign all files in the data directory to the user the web server  runs under, and then you use <tt class="wiki">700</tt> or <tt class="wiki">755</tt>. <p><a name="head-978fb054168faa58843b80a58ab29a3abc33dc1e"></a><H2>2 Upgrade information for specfic versions</H2>
<p>The following sections provide information pertaining to specific versions of the software; if you jump several versions, read all the sections applying to your situation. <p><a name="update-0-11"></a> <a name="head-d0b0f515ad64ca357140d4d452724c6892bbe084"></a><H3>2.1 Version 0.11</H3>
<p><img src="wiki/htdocs/img/idea.gif" width="15" hspace="6" alt="(!)" border="0" height="15"> It is strongly recommended that you change any installation prior to 0.11 to the new distutils scheme, this will make any future upgrades much easier. <p>You should follow the instructions on <a href="http://purl.net/wiki/moinmaster/HelpOnInstalling">HelpOnInstalling</a> regarding basic installation, until you come to the "Creating a wiki instance" step. Then you have two options: <ol type="1"><li>simply adapt your old instance to the new situation, this especially means to create an alias that points to the <tt class="wiki">.../share/moin/htdocs</tt> directory; you have to change <tt class="wiki">url_prefix</tt> to <tt class="wiki">/wiki</tt> then. The positive effect is that you automatically get any new icons and CSS files of version 0.11 and any future version, because distutils will update them in that location. </li><li>create a new instance as per the instructions, copy the data directory from your old instance, and merge the configuration files. </li></ol><p>Check your configuration against the provided default <tt class="wiki">moin_config.py</tt> that you find in <tt class="wiki">.../share/moin/cgi-bin/moin_config.py</tt> after installation with distutils. You should add the <tt class="wiki">sitename</tt> setting, which gets added to the page title, to RSS feeds and the like. <p>When you are offically a part of the <a href="http://purl.net/wiki/moinmaster/InterWiki">InterWiki</a> system, then also add <tt class="wiki">interwikiname</tt>, which should contain your own <a href="http://purl.net/wiki/moinmaster/InterWiki">InterWiki</a> moniker (for example "<tt class="wiki">MoinMoin</tt>" for the <a href="http://purl.net/wiki/moinmaster/MoinMoin">MoinMoin</a> wiki itself). <p>To get new icons, and also to allow I18N customization of the menu and icon links, you should either delete or adapt<sup><a name="fnref-51a2d387e497c83f32ce7925d53b97adefa4877c-1"></a><a href="#fndef-51a2d387e497c83f32ce7925d53b97adefa4877c-1">1</a></sup> your settings for <tt class="wiki">page_icons</tt> and <tt class="wiki">navi_bar</tt>. Note that the new <tt class="wiki">navi_bar</tt> default setting gets the wiki's name from the new <tt class="wiki">sitename</tt> setting, which previously was the main reason to have your own modified <tt class="wiki">navi_bar</tt>. <p>Due to I18N support for system pages, the only remaining configurable page name is that of the front page, which can be set by <tt class="wiki">page_front_page</tt> (the old name <tt class="wiki">front_page</tt> for that setting is also no longer supported); the reasoning behind this is that page name customization was mainly added and used for localization issues, while changing the front page name is rather common, often the front page is named like the whole wiki. <p>Finally, copy any new system pages to your wiki data directory. The current system pages are in the directory <tt class="wiki">.../share/moin/data/text</tt>. The minimal set to copy is the new help pages ("<tt class="wiki">Help*</tt>"). If you are sure you have not modified any system pages, you can simply copy all of them to your instance <tt class="wiki">data/text</tt> directory. <p><img src="wiki/htdocs/img/alert.gif" width="15" hspace="6" alt="/!\" border="0" height="15"> <b>When copying all system pages with one command, be sure to delete pages from the following list of pages that are likely changed by your users.</b> <p>The following pages are very likely to change once a wiki is in use, and it is advisable to delete them from the master system page directory <tt class="wiki">.../share/moin/data/text</tt> before any instance update; they are only included to seed new wikis: <pre class="code">
CategoryCategory 
CategoryHomepage 
FrontPage 
HomepageTemplate 
LocalSpellingWords 
PythonLanguage 
WikiHomePage 
WikiName 
WikiSandBox 
</pre> <p>The recommended set is in the following list: <pre class="code">
Help* 
AbandonedPages 
EventStats 
EventStats_2fHitCounts 
EventStats_2fUserAgents 
FindPage 
InterWiki 
MoinMoin 
OrphanedPages 
PageSize 
Python4Suite 
RandomPage 
RecentChanges 
SiteNavigation 
StructuredText 
SystemInfo 
TitleIndex 
UserPreferences 
WantedPages 
WikiWikiWeb 
WordIndex 
XsltVersion 
</pre> <p>If you want to do German visitors a favour, also copy the new German system and help pages, they will be automatically activated as long as you use the default <tt class="wiki">page_icons</tt> and <tt class="wiki">navi_bar</tt> settings: <pre class="code">
Hilfe* 
AktuelleÄnderungen (Aktuelle_c4nderungen) 
AufgegebeneSeiten 
BenutzerEinstellungen 
GesuchteSeiten 
SeiteFinden 
SeitenGröße (SeitenGr_f6_dfe) 
StartSeite 
TitelIndex 
VerwaisteSeiten 
WegWeiser 
WortIndex 
ZufallsSeite 
</pre> <p>The next version will include an admin interface that will allow interactive upgrades. <p>____<br><a name="fndef-51a2d387e497c83f32ce7925d53b97adefa4877c-1"></a><tt class="wiki"><sup>&#160;&#160;&#160;<a href="#fnref-51a2d387e497c83f32ce7925d53b97adefa4877c-1">1</a>&#160;</sup></tt>Adapting means to compare your settings and the default values found in the MoinMoin/config.py file. <p><a name="update-1-0"></a> <a name="head-084e67410714ed45209c2fc1829d3b5161821488"></a><H3>2.2 Version 1.0</H3>
<p>Version 1.0 is the last to support Python 1.5.2, but some optional features (like statistics) already require Python 2.0. <p><a name="update-1-1"></a> <a name="head-aebe0ed007174f53947b5cc077294c6b536f56d0"></a><H3>2.3 Version 1.1</H3>
<p>Be sure to read the above section on <em>General procedures</em> before you start upgrading. <p><b>Version 1.1 requires Python 2.0 or higher</b>, we recommend to use Python 2.2 (version 2.2.2 if that is available on your host) or even better 2.3.2 (with 2.3.x, <a href="http://purl.net/wiki/moinmaster/MoinMoin">MoinMoin</a> runs about 20-30% faster). <p>The next version (1.2) will require Python 2.2.2 or newer. <p><b>Upgrading your configuration</b> <ul><li> If you changed the default for <tt class="wiki">page_template_ending</tt>, this is now called <tt class="wiki">page_template_regex</tt> and must contain a regex (defaults to '[a-z]Template$'). </li><li> Same applies to <tt class="wiki">page_form_ending</tt> now called <tt class="wiki">page_form_regex</tt> (default: '[a-z]Form$') </li><li> Not a new feature, but configurable now: <tt class="wiki">page_category_regex</tt> (default: '^Category[A-Z]') </li><li> If you have added your own <tt class="wiki">SecurityPolicy</tt>, the class interface for that has changed (see <tt class="wiki">security.py</tt>) </li></ul><p><b>Enabling new features</b> <ul><li> <tt class="wiki">default_lang</tt> (default: 'en') - If user does not set a language in his user settings, this will be used. </li><li> <tt class="wiki">edit_locking</tt> (default: <tt class="wiki">'warn&#160;10'</tt>) - Editor locking policy: None, 'warn &lt;timeout in minutes&gt;', or 'lock &lt;timeout in minutes&gt;'. </li><li> <tt class="wiki">hosts_deny</tt> (default: <tt class="wiki">[]</tt>) - a list of denied IPs; if an IP ends with a dot, it denies a whole subnet (class A, B or C). </li><li> <tt class="wiki">html_pagetitle</tt> (default: <tt class="wiki">None</tt>) -  Allows you to set a specific HTML page title (if not set, it defaults to the value of sitename). </li><li> <tt class="wiki">mail_login</tt> (default: <tt class="wiki">None</tt>) - This is only needed when you use SMTP AUTH to send mail; in that case, set this to the username and password separated by a space, i.e. "user pwd". </li><li> <tt class="wiki">smileys</tt> (default: <tt class="wiki">{}</tt>) -  User-defined smileys (a dict with the markup as the key and a tuple of width, height, border, image name as the value). </li><li> don't forget to read the CHANGES file in the distribution archive </li></ul><!-- MoinMoin 1.173 on pyramid.twistedmatrix.com served this page in 0.250 secs -->
</body></html>
