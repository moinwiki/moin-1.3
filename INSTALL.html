<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta name="robots" content="noindex,nofollow">



<title>MoinMoin/InstallDocs - MoinMaster</title>
<link rel="stylesheet" type="text/css" charset="iso-8859-1" media="all" href="wiki/htdocs/classic/css/common.css">
<link rel="stylesheet" type="text/css" charset="iso-8859-1" media="all" href="wiki/htdocs/classic/css/print.css">


<link rel="Start" href="http://moinmaster.wikiwikiweb.de/FrontPage">
<link rel="Alternate" title="Wiki Markup" href="http://moinmaster.wikiwikiweb.de/MoinMoin/InstallDocs?action=raw">
<link rel="Alternate" media="print" title="Print View" href="http://moinmaster.wikiwikiweb.de/MoinMoin/InstallDocs?action=print">
<link rel="Up" href="http://moinmaster.wikiwikiweb.de/MoinMoin">
<link rel="Search" href="http://moinmaster.wikiwikiweb.de/FindPage">
<link rel="Index" href="http://moinmaster.wikiwikiweb.de/TitleIndex">
<link rel="Glossary" href="http://moinmaster.wikiwikiweb.de/WordIndex">
<link rel="Help" href="http://moinmaster.wikiwikiweb.de/HelpOnFormatting">
</head>

<body lang="en" dir="ltr">
<div id="content" lang="en" dir="ltr">
<p>
This HTML page contains the basic install docs that can be found on <a href="http://moinmaster.wikiwikiweb.de/MoinMoin/InstallDocs">http://moinmaster.wikiwikiweb.de/MoinMoin/InstallDocs</a>. It contains all necessary information to get your wiki up and running, even without being online. If you have a permanent internet connection, you might want to browse the docs on the HelpOnInstalling page, which might contain more up-to-date information. 
</p>
<p>
After following the procedures on this page, you should have a working wiki and can browse the rest of the online docs there. 
</p>
<h3 id="head-65451e37257c4f12fcd35ad5e1a08a1d1de549ea">How to install your own MoinMoin Wiki</h3>
This page describes the installation procedure applying to <a class="interwiki" title="MoinMaster" href="http://moinmaster.wikiwikiweb.de/MoinMoin"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMaster]" width="16" height="16">MoinMoin</a> version 1.1 and up. In the next section, there is a list of real-world <a href="#installscenarios">Installation Scenarios</a> that help you to understand how to apply the instructions in different environments. <p>
<a href="#basic-install">Basic Installation</a> explains the "<tt>setup.py</tt>" step of the installation in more detail. This applies equally to all scenarios, and you should read it before trying a live installation. 
</p>
<p>
<a href="#trouble-shooting">Trouble-shooting</a> helps with fixing any general problems you might encounter, which apply to any installation platform. 
</p>
<p>
After a successful installation, you might want to read more about configuration and other options that you, as the wiki administrator, can set up. <a class="interwiki" title="MoinMaster" href="http://moinmaster.wikiwikiweb.de/HelpOnAdministration"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMaster]" width="16" height="16">HelpOnAdministration</a> contains links to pages that cover these topics. Especially, the <a class="interwiki" title="MoinMaster" href="http://moinmaster.wikiwikiweb.de/HelpOnConfiguration"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMaster]" width="16" height="16">HelpOnConfiguration</a> and <a class="interwiki" title="MoinMaster" href="http://moinmaster.wikiwikiweb.de/HelpOnUpdating"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMaster]" width="16" height="16">HelpOnUpdating</a> pages provide additional information regarding wiki setup and maintenance. <a class="interwiki" title="MoinMoin" href="http://moinmoin.wikiwikiweb.de/MoinMoinWinCvs"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMoin]" width="16" height="16">MoinMoinWinCvs</a> and <a class="interwiki" title="MoinMoin" href="http://moinmoin.wikiwikiweb.de/MoinMoinUnixCvs"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMoin]" width="16" height="16">MoinMoinUnixCvs</a> describe how to run your wiki using the current development version from the <a class="interwiki" title="MoinMoin" href="http://moinmoin.wikiwikiweb.de/SourceForge"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMoin]" width="16" height="16">SourceForge</a> CVS repository. 
</p>

<div>
<table width="100%">
<tr>
<td bgcolor="#FFA0A0">
 Please <strong>make sure</strong> that you do <strong>not</strong> accidently put your wiki's <strong><tt>data/</tt></strong> directory under a directory directly accessible by your web server (like below document root). Or at least forbid your web server serving anything below <tt>data/</tt> to a user - this is neither needed nor wanted! Your web server needs to serve moin.cgi and the stuff below htdocs <strong>only</strong>. </td>
</tr>
</table>
</div>
<p>
<a id="installscenarios"> <h4 id="head-c2b2ba0ea784e130d387783b1b16d5f09b611baf">Sample Installation Scenarios</h4>

</p>
<p>
The following links lead you to concrete examples of installation sessions, showing the commands used and explaining what they do. It is highly recommended that you <em>first</em> read the general information on installing (especially the next section of this page) before choosing an installation scenario that best fits your intended use of <a class="interwiki" title="MoinMaster" href="http://moinmaster.wikiwikiweb.de/MoinMoin"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMaster]" width="16" height="16">MoinMoin</a>. 
</p>
<p>
UNIX: 
</p>

    <ul>

    <li>
<p>
 <a href="#unix-install">UNIX Installation</a> 
</p>
</li>

    </ul>


<p>
Windows: 
</p>

    <ul>

    <li>
<p>
 <a href="#win32apache-install">Windows Installation using Apache</a> 
</p>
</li>
    <li>
<p>
 <a href="#win32iis-install">Windows Installation using IIS</a> 
</p>
</li>

    </ul>


<p>
Mac OS X: 
</p>

    <ul>

    <li>
<p>
 <a href="#macosx-install">Mac OS X Installation</a> 
</p>
</li>

    </ul>


<p>
Long-Running-Process Setup: 
</p>

    <ul>

    <li>
<p>
 <a href="#fastcgi-install">FastCGI Setup using Apache</a> 
</p>
</li>
    <li>
<p>
 <a href="#modpy-install">mod_python Setup using Apache</a> 
</p>
</li>
    <li>
<p>
 <a href="#twisted-install">Setup using twisted</a> 
</p>
</li>

    </ul>


<p>
<a id="basic-install"> <div id="Include_HelpOnInstalling(2f)BasicInstallation" lang="en" dir="ltr">
<h3 id="head-7a031fb4b54459f27072c9ee40c4b13ebd94a781">Basic Installation</h3>
<p>
Before you can integrate MoinMoin into your web environment, you have to do the basic installation using the standard Python <em>distutils</em> mechanism. We'll explain the usual steps you need to take to do this. For more details on the distutils installation process, consult the <a class="external" href="http://www.python.org/doc/current/inst/inst.html"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">Installing Python Modules</a> document of your Python manual. 
</p>

    <ul>

 <img src="wiki/htdocs/classic/img/alert.png" alt="/!\" height="15" width="15"> <strong>NOTE:</strong> You will need the Python Development package installed on UNIX systems for distutils to work correctly. 
    </ul>


<p>
The first step is to unpack the distribution archive, which you have done already when you loaded this instructions from your disk. If you read this on the web, the distribution comes in a versioned ZIP or TAR archive, which you can unpack in the usual ways, into a temporary directory (<tt>/tmp</tt> on UNIX, <tt>C:\TEMP</tt> on Windows). The distribution archive will always unpack into a directory named <tt>moin-&lt;version&gt;</tt>, for example <tt>moin-1.1</tt>.  To download the distribution archive, go to the <a class="external" href="http://sourceforge.net/project/showfiles.php?group_id=8482"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">download area</a>. 
</p>
<p>
After unpacking, to install into a specific directory (<tt>C:\moin</tt> in our example), call <tt>setup.py</tt> after changing your current directory to the distribution directory. The following commands can be used to complete theses steps: 
</p>

                <ul>

    
<pre>    unzip moin-1.1.zip
    cd moin-1.1
    python setup.py --quiet install --prefix=C:\moin
</pre>
                </ul>


<p>
This creates the following directories in "C:\moin" (note that on a UNIX system, the directory layout will be slightly different): 
</p>

                <ul>

    
<pre>    MoinMoin
    MoinMoin/action
    MoinMoin/formatter
    MoinMoin/i18n
    MoinMoin/macro
    MoinMoin/parser
    MoinMoin/scripts
    MoinMoin/support
    MoinMoin/twisted
    MoinMoin/webapi
    Scripts
    share
    share/moin
    share/moin/cgi-bin
    share/moin/data
    share/moin/data/backup
    share/moin/data/cache
    share/moin/data/pages
    share/moin/data/plugin
    share/moin/data/plugin/action
    share/moin/data/plugin/macro
    share/moin/data/text
    share/moin/data/user
    share/moin/htdocs
    share/moin/htdocs/css
    share/moin/htdocs/img
</pre>
                </ul>


<p>
You will likely see the following warning: 
</p>

                <ul>

    warning: install: modules installed to 'C:\moin\', which     is not in Python's module search path (sys.path) -- you'll     have to change the search path yourself  
                </ul>


<p>
This means exactly what it says, you need to add your install directory to the search path of Python. There are several ways to do this: 
</p>

                <dl>

                <dt>    Environment variable</dt><dd>
<p>
Change <tt>PYTHONPATH</tt> in a way that is     persistent (<tt>/etc/profile.d</tt> on UNIX, <tt>AUTOEXEC.BAT</tt> on W9x,     the <tt>Properties</tt> item in the context menu of <tt>My&nbsp;Computer</tt> on NT4 and     W2K) 
</p>
</dd>
                <dt>    Apache "httpd.conf"</dt><dd>
<p>
Use the <tt>SetEnv</tt> directive to set     <tt>PYTHONPATH</tt> to a suitable value, for example: 
<pre>    SetEnv PYTHONPATH "C:\moin"
</pre>
</p>
</dd>
                <dt>    "moin.cgi"</dt><dd>
<p>
Directly add your installation directory to     the CGI driver script, like this: 
<pre>    import sys
    sys.path.append('C:/moin')
</pre>
</p>
</dd>

                </dl>

<p>
If you use the following default installation command, MoinMoin will be installed to the Python directory: 
</p>

                <ul>

    
<pre>    python setup.py --quiet install
</pre>
                </ul>


<p>
You won't need to change your <tt>PYTHONPATH</tt> then, but depending on your system environment you might not be able to use that command, especially when you are not the root user on a UNIX system. If you don't know where your Python directory is, this command will tell you: 
</p>

                <ul>

    
<pre>    python -c "import sys; print sys.prefix"
</pre>
                </ul>


<p>
The directory structure we showed above will then be created in that directory. If you're interested in the exact list of files that are installed, use the <tt>--record</tt> option of distutils. 
</p>
</div>
 
</p>
<hr size="4">
 <a id="trouble-shooting"> <hr size="4">
 <h2>Trouble-shooting</h2>
<div id="Include_HelpOnInstalling(2f)TroubleShooting" lang="en" dir="ltr">
<h4 id="head-3e3e1061347b44a132ad65d0753ac815602ba689">Built-in test</h4>
There's a built-in diagnostic mode that's useful when doing an install; just append "<tt>?test</tt>" to the URL of your wiki: 
<pre>lynx --dump http://`hostname`/mywiki?test
</pre><p>
If you see an import error here, but "<tt>python&nbsp;-c&nbsp;"import&nbsp;MoinMoin"</tt>" works, it's likely a result of missing file permissions or a wrong PYTHONPATH setting within the web server environment. 
</p>
</div>
 <hr size="4">
 <a id="unix-install"> <hr size="4">
 <h2>UNIX Installation</h2>
<div id="Include_HelpOnInstalling(2f)ApacheOnUnix" lang="en" dir="ltr">
<p>
<strong>Index</strong> <ol>
<li>
<a href="#head-cd23dfc430be1466fa023cc08dcdc228278fd7c8">Installation when you are root or the webmaster</a></li>
<ol>
<li>
<a href="#head-4ae55a7c6b4551d23d7089f46872de4cc9fc93d3">Installing MoinMoin</a></li>
<li>
<a href="#head-c35303a8fa270ea92418a519639df15043ecce57">Creating a wiki instance</a></li>
<li>
<a href="#head-285ec850c11d78bac10f6bfa31b69a37f1b257c9">Troubleshooting</a></li>
<ol>
<li>
<a href="#head-6a41bda5bec350bac3ff8a850f46d958f68d70eb">Dueling Pythons</a></li>
<li>
<a href="#head-48d76199bcbff95dfac4e81f86f47d8f5e7c9a13">Distutils does not work</a></li>
<li>
<a href="#head-f6e7340d7da0a13cd248122ce0c47f8f2ff4b7e5">Missing file permissions</a></li>
<li>
<a href="#head-baf632efeb71f97521df5c46535fc0ced03753b3">Missing permission to serve the `mywiki` directory</a></li>
</ol>

</ol>

<li>
<a href="#head-354b04d9d28ce4a0e2160ccb1481ea3387856234">Installation into your home directory using a standalone server</a></li>
<ol>
<li>
<a href="#head-983d010594325f05b5963bb54f088465b21a6df1">Making sure python work</a></li>
<li>
<a href="#head-70277344286426093515dd43eb689fd986d2ffee">Doing the basic installation</a></li>
<li>
<a href="#head-39f38662f77e35dab742b1b54877ef26f312daf2">Setting up a wiki instance</a></li>
<li>
<a href="#head-3041a7260c9a5436fb6e73922b5af76d7018707c">Configuration the installation</a></li>
<li>
<a href="#head-7725e05476ed2d82c0f887aff3382e0fb31309ae">Starting</a></li>
</ol>

<li>
<a href="#head-d647e77c22059ce75c807d00504a3df5a1b66963">Installation into your home directory using a web server</a></li>
<ol>
<li>
<a href="#head-f968c25d9eff78969bae19d7cb4a6f391e45b84e">Making sure /~username URLs work</a></li>
<li>
<a href="#head-70277344286426093515dd43eb689fd986d2ffee-2">Doing the basic installation</a></li>
<li>
<a href="#head-39f38662f77e35dab742b1b54877ef26f312daf2-2">Setting up a wiki instance</a></li>
<li>
<a href="#head-09dab53502a7d707521feef1d49d36dc1ab3b18c">Setting up public_html and testing the installation</a></li>
</ol>

</ol>

 
</p>
<h3 id="head-cd23dfc430be1466fa023cc08dcdc228278fd7c8">Installation when you are root or the webmaster</h3>
<p>
When you are root or the webmaster on the host you want to install MoinMoin on, you can place the software in a "standard" location, and also better integrate MoinMoin into your webserver. Especially, you can use a "nice" base URL that does not include "cgi-bin" or "moin.cgi" at all. 
</p>
<p>
Most GNU/Linux distributions come with Apache pre-installed. In the following description, we assume a file system layout with: 
</p>

    <ul>

    <li>
<p>
 <tt>/etc/httpd/httpd.conf</tt> - the main httpd configuration file 
</p>
</li>
    <li>
<p>
 <tt>/var/log/httpd/error_log</tt> - log containing error messages 
</p>
</li>

    </ul>


<h4 id="head-4ae55a7c6b4551d23d7089f46872de4cc9fc93d3">Installing MoinMoin</h4>
<p>
Before creating a wiki instance, you have to download and install the basic MoinMoin software. We assume you already have downloaded the distribution archive to "<tt>/tmp</tt>" <sup><a href="#fndef-224761f9bd2355b0e74c51e384e8d90a69288a67-0" id="fnref-224761f9bd2355b0e74c51e384e8d90a69288a67-0">1</a></sup>. 
</p>
<p>
Open a shell and enter the following commands: 
<pre>cd /tmp
tar xzf moin-1.1.tgz
cd moin-1.1
python setup.py install --record=install.log
</pre>
</p>
<p>
This will install all necessary files into the <tt>sys.prefix</tt> directory of your Python interpreter (usually either "<tt>/usr</tt>" or "<tt>/usr/local</tt>"), and create a "<tt>install.log</tt>" file listing all the files that are created there. The command "<tt>python&nbsp;-c&nbsp;'import&nbsp;sys;&nbsp;print&nbsp;sys.prefix'</tt>" will tell you where your Python interpreter is installed, we assume "<tt>/usr/local</tt>" here. 
</p>
<p>
<div class="footnotes"><div></div><ul><li><span><a href="#fnref-224761f9bd2355b0e74c51e384e8d90a69288a67-0" id="fndef-224761f9bd2355b0e74c51e384e8d90a69288a67-0">1</a></span> If you want to install the current development version from CVS, replace "/tmp" with your "moin" working directory.</li></ul></div> 
</p>
<h4 id="head-c35303a8fa270ea92418a519639df15043ecce57">Creating a wiki instance</h4>
<p>
You could run your wiki directly using the sample wiki created in "<tt>/usr/local/share/moin</tt>", but this is not recommended for two reasons: 
</p>

    <ol type="1">

    <li>
<p>
updating your wiki is more complicated and more dangerous. 
</p>
</li>
    <li>
<p>
creating a second wiki instance, even if you currently don't plan for one, is much easier. 
</p>
</li>

    </ol>


<p>
We need to know what user and group your Apache server runs on, so issue this command: 
<pre>jh@localhost:~ &gt; egrep "^User|^Group" /etc/httpd/httpd.conf
User wwwrun
Group nogroup
</pre>
</p>
<p>
This shows a typical result "<tt>wwwrun.nogroup</tt>", which we will use later on. 
</p>
<p>
To create an instance named "<tt>mywiki</tt>", enter these commands on a <em>root</em> shell prompt: 
<pre>cd /usr/local/share/moin
mkdir mywiki
cp -r data mywiki
cp cgi-bin/* mywiki
chown -R wwwrun.nogroup mywiki
chmod a+rx mywiki/*.cgi
</pre>
</p>
<p>
"<tt>mywiki</tt>" is the name of your wiki instance, you might want to chose a different name best fitting the intended use of this instance; just don't name it simply "<tt>wiki</tt>", because that would result in problems later on. 
</p>
<p>
Then, append these lines to "<tt>/etc/httpd/httpd.conf</tt>": 
<pre>Alias /wiki/ "/usr/local/share/moin/htdocs/"
ScriptAlias /mywiki "/usr/local/share/moin/mywiki/moin.cgi"
</pre>
</p>
<p>
The first line you only need once; the second line is needed once for each wiki instance (of course, each one with another wiki name and path). 
</p>
<p>
That is all, <strong>restart your Apache server</strong> (usually "<tt>/etc/init.d/apache&nbsp;restart</tt>") and try to access your new-born wiki with the URL "<tt>http://127.0.0.1/mywiki/</tt>". You should see the FrontPage, try to edit and save it, and if that works, see if your edit is reflected on the RecentChanges page. 
</p>
<p>
Finally, edit "<tt>moin_config.py</tt>" and at least change "<tt>sitename</tt>" and "<tt>logo_url</tt>" to some personal values: 
<pre>sitename = 'My Wiki'
logo_url = '/images/mywiki-logo.gif'
</pre>
</p>
<p>
For a personal or intranet installation, you'll normally also add the line 
<pre>allowed_actions = ['DeletePage', 'AttachFile']
</pre>
</p>
<h4 id="head-285ec850c11d78bac10f6bfa31b69a37f1b257c9">Troubleshooting</h4>
<p>
The first thing to do when your wiki does not work as expected is to issue the command "<tt>tail&nbsp;/var/log/httpd/error_log</tt>" to display the most recent errors. Usually, you will get a hint on what went wrong, like missing file system permissions. Also, always consult the <a href="http://moinmaster.wikiwikiweb.de/HelpOnInstalling/TroubleShooting">HelpOnInstalling/TroubleShooting</a> page for further hints on your problem. 
</p>
<h5 id="head-6a41bda5bec350bac3ff8a850f46d958f68d70eb">Dueling Pythons</h5>
<p>
The most common problem you might encounter is when you have an old Python version installed into "<tt>/usr</tt>", and a newer Python distribution into "<tt>/usr/local</tt>"; this is typical for GNU/Linux distributions that still come bundled with an old Python version. 
</p>
<p>
In that case, if you enter "<tt>python</tt>" on your prompt, you will usually get the more recent Python interpreter, because "<tt>/usr/local/bin</tt>" is in your <tt>PATH</tt>. The situation is different in your webserver environment, and thus you might have to change the bang path of "<tt>moin.cgi</tt>", like this: 
<pre>#!/usr/local/bin/python

"""
    MoinMoin - CGI Driver Script
...
"""
</pre>
</p>
<h5 id="head-48d76199bcbff95dfac4e81f86f47d8f5e7c9a13">Distutils does not work</h5>
<p>
If you have problems with the <strong>distutils</strong> install step, note that you need to have the Python development package installed on some Unix distributions. On Mandrake, you need to "<tt>rpm&nbsp;-i&nbsp;python-devel-2.x.x-xmdk.i586.rpm</tt>". 
</p>
<h5 id="head-f6e7340d7da0a13cd248122ce0c47f8f2ff4b7e5">Missing file permissions</h5>
<p>
If you are root, the installed files may be readable only by root, but they must also be readable by the web server before the wiki will work. This includes both the Python modules and the site itself. For the data directory, the web server also needs <em>write</em> access.  To fix this, first find out where the Python module directory is; look in <tt>install.log</tt>, or run the command:  
</p>

<pre>python -c "import sys; print '%s/lib/python%s/site-packages' % ( sys.prefix, sys.version[:3] )"
</pre><p>
For the example below, we'll assume that the Python module directory is <tt>/usr/local/lib/python2.3/site-packages</tt>. Make the files world-readable using the following commands: 
<pre>cd /usr/local
chmod -R a+rX lib/python2.3/site-packages/MoinMoin share/moin
</pre>
</p>
<p>
<img src="wiki/htdocs/classic/img/alert.png" alt="/!\" height="15" width="15"> Note that by making everything under <tt>/usr/local/share/moin</tt> world-readable, local users can read the files containing your wiki. You don't really need to do that, since the <tt>mywiki</tt> directory is owned by the webserver. If you don't want that, you do a "<tt>chmod&nbsp;-R&nbsp;o-rwx&nbsp;share/moin/mywiki</tt>" after the above commands. 
</p>
<h5 id="head-baf632efeb71f97521df5c46535fc0ced03753b3">Missing permission to serve the `mywiki` directory</h5>
In SUSE 9.0 serving of directorys other than the document-root "<tt>/srv/www/htdocs</tt>" with Apache is swiched of by default for security reasons in "<tt>/etc/httpd/httpd.conf</tt>" (or for Apache2 "<tt>/etc/apach2/httpd.conf</tt>"):  
<pre>* forbid access to the entire filesystem by default
&lt;Directory /&gt;
  Options None
  AllowOverride None
  Order deny, allow
  Deny from all
&lt;/Directory&gt;
</pre>to allow apache serving directorys outside of the document root you have to add these lines to "<tt>/etc/httpd/httpd.conf</tt>" (In Suse actually it is recommended to create a new "<tt>http.conf.local</tt>" and include this file in "<tt>/etc/sysconfig/apache2</tt>"): 
<pre>Alias /wiki/ "/usr/local/share/moin/htdocs/"
&lt;Directory "/usr/local/share/moin/htdocs/&gt;
   Order deny,allow
   Allow from all
&lt;/Directory&gt;
ScriptAlias /mywiki "/usr/local/share/moin/mywiki/moin.cgi"
&lt;Directory "/usr/local/share/moin/mywiki/moin.cgi"&gt;
   Order deny,allow
   Allow from all
&lt;/Directory&gt;
</pre><img src="wiki/htdocs/classic/img/alert.png" alt="/!\" height="15" width="15"> Note that in Suse 9.0 the above paths to "<tt>/usr/local/share/</tt>" is always "<tt>/usr/share/</tt>" <p>
--added by <a class="nonexistent" href="http://moinmaster.wikiwikiweb.de/KonradBauckmeier">KonradBauckmeier</a> 25.03.2004 10:21 
</p>
<h3 id="head-354b04d9d28ce4a0e2160ccb1481ea3387856234">Installation into your home directory using a standalone server</h3>
<p>
Installation into your shell account's home directory is typically used on a host shared by many users and where you are <em>not</em> the root user. This installation does not need a webserver installed. Only python and Moin is necessary! 
</p>
<h4 id="head-983d010594325f05b5963bb54f088465b21a6df1">Making sure python work</h4>
<p>
A working Python installation is also assumed. 
<pre>jh@localhost:~ &gt; python -V
Python 2.3
</pre>
</p>
<h4 id="head-70277344286426093515dd43eb689fd986d2ffee">Doing the basic installation</h4>
<p>
The following commands will fetch and install a moin tarball. Use an appropriate URL to the version you want to install. 
</p>

<pre>mkdir ~/tmp
cd ~/tmp
wget http://twtelecom.dl.sourceforge.net/sourceforge/moin/moin-1.2.1.tar.gz
tar xfz moin-1.2.1.tar.gz
cd moin-1.2.1
python setup.py --quiet install --home=$HOME --record=install.log
</pre><p>
This will install the MoinMoin software into the directories "<tt>~/lib/python/MoinMoin</tt>", "<tt>~/bin</tt>", and "<tt>~/share/moin</tt>". You'll find a detailed file list in "<tt>install.log</tt>". 
</p>
<h4 id="head-39f38662f77e35dab742b1b54877ef26f312daf2">Setting up a wiki instance</h4>
<p>
The next step is to create a copy of the wiki data and the config file. I don't know at the moment why it should be necessary to copy htdocs to the new wiki directory but if it is not done then we have no icons.   
<pre>mkdir ~/wiki
cd ~/wiki
cp ~/share/moin/cgi-bin/moin_config.py .
cp ~/share/moin/cgi-bin/moin.py .
cp -r ~/share/moin/data .
chmod -R o+rwX data
cp -r ~/share/moin/htdocs .
</pre>
</p>
<p>
First edit moin_config.py. You need to at least change the "<tt>data_dir</tt>", "<tt>url_prefix</tt>" and "<tt>httpd</tt>" config values, as you can see in the following diff: 
<pre>@@ -28,4 +28,4 @@
 interwikiname = None
-data_dir = './data/'
-url_prefix = '/wiki'
+data_dir = '/home/jh/wiki/data/'
+url_prefix = 'http://localhost:8080'
 logo_url = url_prefix + '/img/moinmoin.png'
</pre>
</p>
<p>
At the end of the file you have to setup for standalone server 
<pre>httpd_host = "localhost"
httpd_port = 8080
httpd_user = "jh"
httpd_docs = "/home/jh/wiki/htdocs/"
</pre>
</p>
<p>
To get attachments working it is necessary to set the attachments variable to a path depending on  <em>httpd_docs</em>. 
</p>

<pre>attachments ={
         'dir':'/home/jh/wiki/htdocs/'+sitename,
         'url': url_prefix+'/'+sitename}
</pre><p>
Edit "<tt>moin.py</tt>" and append your instalation path to the system path. 
<pre># moin_config is here:
sys.path.append('/home/jh/wiki')

# stuff used by moin_config (farm config):
#sys.path.append('/org/wiki')

# moin code is here:
sys.path.append('/home/jh/lib/python2.3/site-packages/')
sys.path.append('/home/jh/lib/python2.3/')
</pre>The jh stands for your user name. This must be konsequent changed into your username everywhere in these configuration files. 
</p>
<h4 id="head-3041a7260c9a5436fb6e73922b5af76d7018707c">Configuration the installation</h4>
<p>
Change "<tt>~/share/moin/cgi-bin/moin.cgi</tt>"  similarly to this diff: 
</p>
<p>
To be able to execute the CGI script in your home directory, you need to extend Python's path within that script, and possibly adapt the <em>bang path</em> (that is the first line of the script). 
</p>
<p>
Change "<tt>~/share/moin/cgi-bin/moin.cgi</tt>"  similarly to this diff: 
</p>

<pre>@@ -1,2 +1,2 @@
-#! /usr/bin/env python
+#! /usr/local/bin/python2.3

@@ -11,4 +11,4 @@

-#import sys
-#sys.path.append('/usr/local/home/USERNAME/lib/python')
+import sys
+sys.path.extend(['/home/jh/wiki', '/home/jh/lib/python2.3'])
</pre><h4 id="head-7725e05476ed2d82c0f887aff3382e0fb31309ae">Starting</h4>
The local wiki is started by executing <tt>~/wiki/moin.py</tt> 
<pre>Serving on localhost:8080, documents in '/home/jh/wiki/htdocs'
</pre>And now, your wiki should work and is available at the URL "<tt>http://localhost:8080</tt>". Conclude your tests by editing and saving the <tt>FrontPage</tt> and checking out <tt>RecentChanges</tt>, which should reflect that edit.<br>
 <p>
-- <a class="nonexistent" href="http://moinmaster.wikiwikiweb.de/ReimarBauer">ReimarBauer</a> 2004-03-21 08:19:51 
</p>
<h3 id="head-d647e77c22059ce75c807d00504a3df5a1b66963">Installation into your home directory using a web server</h3>
<p>
Installation into your shell account's home directory is typically used on a host shared by many users and where you are <em>not</em> the root user. This usually implies that you cannot change the <tt>httpd.conf</tt> file, and also you cannot copy files into the machine's <tt>cgi-bin</tt> and <tt>htdocs</tt> directories. For this situation, Apache includes the <tt>UserDir</tt> directive, which maps all URLs that start with "<tt>/~username</tt>" to a directory in your home directory, where you have write permissions and thus can install MoinMoin. 
</p>
<h4 id="head-f968c25d9eff78969bae19d7cb4a6f391e45b84e">Making sure /~username URLs work</h4>
<p>
This kind of setup can only work if your webmaster has configured the host's Apache server so that the <tt>UserDir</tt> mechanism works. Here's how to check for this:  
<pre>jh@localhost:~ &gt; ls -ld public_html
drwxr-xr-x   2 jh       users          35 Jan 31 00:29 public_html
</pre>
</p>
<p>
If this does not show a listing like above, then you might need to create the <tt>public_html</tt>directory. Note that this directory must be readable (<tt>r-x</tt>) by the web server. 
<pre>jh@localhost:~ &gt; lynx -error_file=/dev/stderr -dump http://localhost/~jh/ &gt;/dev/null
URL=http://localhost/~jh/ (GET)
STATUS=HTTP/1.1 200 OK
</pre>
</p>
<p>
You see here that we get a "<tt>200&nbsp;OK</tt>" status response, which means that you can access your <tt>public_html</tt> area. If it does not work, you will probably get a "<tt>403&nbsp;Forbidden</tt>" or a "<tt>404&nbsp;Not&nbsp;Found</tt>" response. The first one normally indicates that you need to fix the permissions of your home directory (<tt>~</tt>) or your <tt>~/public_html</tt>. But we also need to be able to execute CGI scripts, so we test that, too. 
<pre>jh@localhost:~ &gt; `'''`cat &gt;~/public_html/test.cgi
#!/bin/sh
echo Content-Type: text/plain
echo
echo IT WORKS
&lt;CTRL-D&gt;
jh@localhost:~ &gt; chmod a+rx ~/public_html/test.cgi
jh@localhost:~ &gt; lynx -dump http://localhost/~jh/test.cgi
IT WORKS
</pre>
</p>
<p>
If you see anything else than "<tt>IT&nbsp;WORKS</tt>", then you are not allowed to execute CGI scripts. How you get that to work is not in the scope of this description, ask your webmaster! 
</p>
<p>
A working Python installation is also assumed. 
<pre>jh@localhost:~ &gt; python -V
Python 2.3
</pre>
</p>
<p>
<img src="wiki/htdocs/classic/img/idea.png" alt="(!)" height="15" width="15"> The command line examples show your input after the prompt (<tt>jh@localhost:~&nbsp;&gt;</tt>). The examples use "<tt>jh</tt>" as the user's name, which means you have to replace your own one whereever "<tt>jh</tt>" appears. The same is true for version numbers (<tt>1.1</tt>) and download URLs. 
</p>
<h4 id="head-70277344286426093515dd43eb689fd986d2ffee-2">Doing the basic installation</h4>
<p>
The following commands will fetch and install a moin tarball. Use an appropriate URL to the version you want to install. 
</p>

<pre>mkdir ~/tmp
cd ~/tmp
wget http://moin.sf.net/files/moin-1.1.tar.gz
tar xfz moin-1.1.tar.gz
cd moin-1.1
python setup.py --quiet install --home=$HOME --record=install.log
</pre><p>
This will install the MoinMoin software into the directories  "<tt>~/lib/python/MoinMoin</tt>", "<tt>~/bin</tt>", and "<tt>~/share/moin</tt>". You'll find a detailed file list in "<tt>install.log</tt>". 
</p>
<h4 id="head-39f38662f77e35dab742b1b54877ef26f312daf2-2">Setting up a wiki instance</h4>
<p>
The next step is to create a copy of the wiki data and the config file. 
<pre>mkdir ~/wiki
cd ~/wiki
cp ~/share/moin/cgi-bin/moin_config.py .
cp -r ~/share/moin/data .
chmod -R o+rwX data
vi moin_config.py
</pre>
</p>
<p>
The last command starts the editor, you need to at least change the "<tt>data_dir</tt>" and "<tt>url_prefix</tt>" config values, as you can see in the following diff: 
<pre>@@ -28,4 +28,4 @@
 interwikiname = None
-data_dir = './data/'
-url_prefix = '/wiki'
+data_dir = '/home/jh/wiki/data/'
+url_prefix = '/~jh/wiki'
 logo_url = url_prefix + '/img/moinmoin.png'
</pre>
</p>
<h4 id="head-09dab53502a7d707521feef1d49d36dc1ab3b18c">Setting up public_html and testing the installation</h4>
<p>
Now we create the public part of the wiki, which is directly accessible by the web browser.  
<pre>cd ~/public_html
cp -r ~/share/moin/htdocs wiki
cp ~/share/moin/cgi-bin/*.cgi .
chmod a+rx *.cgi
</pre>
</p>
<p>
To be able to execute the CGI script in your home directory, you need to extend Python's path within that script, and possibly adapt the <em>bang path</em> (that is the first line of the script). So, change "<tt>moin.cgi</tt>" similarly to this diff: 
<pre>@@ -1,2 +1,2 @@
-#! /usr/bin/env python
+#! /usr/local/bin/python2.3

@@ -11,4 +11,4 @@

-#import sys
-#sys.path.append('/usr/local/home/USERNAME/lib/python')
+import sys
+sys.path.extend(['/home/jh/wiki', '/home/jh/lib/python'])
</pre>
</p>
<p>
Finally, you can test your wiki installation by running the <em>MoinMoin CGI Diagnosis</em>: 
<pre>lynx -dump http://localhost/~jh/moin.cgi?test
</pre>
</p>
<p>
And now, your wiki should work and is available at the URL "<tt>http://localhost/~jh/moin.cgi</tt>". Conclude your tests by editing and saving the <tt>FrontPage</tt> and checking out <tt>RecentChanges</tt>, which should reflect that edit. 
</p>
</div>
 <hr size="4">
 <a id="win32apache-install"> <hr size="4">
 <h2>Windows Installation using Apache</h2>
<div id="Include_HelpOnInstalling(2f)ApacheOnWin32" lang="en" dir="ltr">
<strong>Index</strong> <ol>
<li>
<a href="#head-09a428f93ec07a73d726f8bd037ecacfaaf8b044">Requirements</a></li>
<li>
<a href="#head-a8bc382020aaaa716a496826f97b0c9d436c31a9">Preparation</a></li>
<ol>
<li>
<a href="#head-b7a7ba145f14ead93023aa96a4f4011bcd36599d">MSI Installer</a></li>
<li>
<a href="#head-f96f8fd06f40db4723da53f7c262f0a026174a19">WinZip, unzip, ...</a></li>
<li>
<a href="#head-087b9a7349621ad696a29819ff9914b11b73373e">WinCVS, TortoiseCVS, or Neither</a></li>
<li>
<a href="#head-4a60061c6ad216d661baf0fb61c263690cd3653d">Installing Apache</a></li>
<li>
<a href="#head-e4ce45d479f9c28c42ec0fff53ad64c1fc1e1dfb">Installing Python</a></li>
</ol>

<li>
<a href="#head-4ae55a7c6b4551d23d7089f46872de4cc9fc93d3">Installing MoinMoin</a></li>
<li>
<a href="#head-07dd036e6d83a2d5953199459b0ff8acce4b4858">Creating a Wiki Instance</a></li>
<li>
<a href="#head-285ec850c11d78bac10f6bfa31b69a37f1b257c9">Troubleshooting</a></li>
<ol>
<li>
<a href="#head-ffa5578af85cd8c29d2df2242dc504e3b2ba687d">Internal Server Error</a></li>
<li>
<a href="#head-d205cbd6783332a212c5ae92d73c77178c2d2f28">Not Found</a></li>
<li>
<a href="#head-f77f846fcd197c87bb52077e10879eeb462a9a44">The Page Cannot be found</a></li>
<li>
<a href="#head-d420016870f156dc7564a07f1646a984aa68abd0">FrontPage Loads Without Icons</a></li>
</ol>

</ol>

 <h3 id="head-09a428f93ec07a73d726f8bd037ecacfaaf8b044">Requirements</h3>
<p>
Before you install MoinMoin, you must have the necessary infrastructure in place. This procedure explains the steps necessary to install the infrastructure and provides detailed instructions for the installation of MoinMoin.  
</p>
<p>
Downloading and installing all of the required components will require almost 100 MB of disk space. The table below shows the approximate sizes of the various components.  
</p>

<div>
<table>
<tr bgcolor="#EEDDAA">
<td>
Product</td>
<td>
Download MB</td>
<td>
Installation MB</td>
</tr>
<tr>
<td>
Apache</td>
<td align="center">
5</td>
<td align="center">
20</td>
</tr>
<tr>
<td>
Python</td>
<td align="center">
10-15</td>
<td align="center">
40-60</td>
</tr>
<tr>
<td>
win32all</td>
<td align="center">
4</td>
<td align="center">
20</td>
</tr>
<tr>
<td>
MoinMoin</td>
<td align="center">
0.5</td>
<td align="center">
10</td>
</tr>
</table>
</div>
<p>
Many users prefer to install software products in a folder other than the installation default. Python typically changes the default installation folder name with each point release, and Apache has changed the default installation folder name with the release of version 2.  Instead of enumerating all the possibilities at each step, this procedure will use the <strong>Reference</strong> name in the table below as the installed location for each product. Substitute your real installation location when editing configuration files and entering commands. 
</p>

<div>
<table>
<tr bgcolor="#EEDDAA">
<td>
Reference</td>
<td>
Product</td>
<td>
Installation Default or Typical Name</td>
</tr>
<tr>
<td>
<strong>C:\Apache</strong></td>
<td>
 Apache</td>
<td>
C:\Program Files\Apache Group\Apache2</td>
</tr>
<tr>
<td>
<strong>C:\Python</strong></td>
<td>
Python</td>
<td>
C:\Python22</td>
</tr>
<tr>
<td>
<strong>C:\Moin</strong></td>
<td>
wiki instances</td>
<td>
C:\My Documents\Moin</td>
</tr>
</table>
</div>
<p>
This installation procedure was tested with Apache 1.3.26 and Apache 2.0.44 for Windows running on Windows/ME, and using Python 2.1, 2.2 and 2.3a. 
</p>
<h3 id="head-a8bc382020aaaa716a496826f97b0c9d436c31a9">Preparation</h3>
<h4 id="head-b7a7ba145f14ead93023aa96a4f4011bcd36599d">MSI Installer</h4>
Installation of Apache and one alternative distribution of Python require the Microsoft <strong>MSI Installer</strong>.  The latest version, 2.0, was released in September of 2001. You will know you don't have the correct version if you receive errors after double-clicking on a file name ending in <strong>.msi</strong>. To get the latest version, go to <a href="http://www.microsoft.com/">http://www.microsoft.com/</a>, search for <strong>msi installer</strong>, and follow the instructions.  There are two versions, one for Windows/ME, 98, and 95; and another for Windows 2000 and NT. Windows/XP has the 2.0 version and requires no update. <h4 id="head-f96f8fd06f40db4723da53f7c262f0a026174a19">WinZip, unzip, ...</h4>
MoinMoin is distributed in a zipped format for Windows users. Some versions of Windows are distributed with an <strong>unzip</strong> utility, many other Windows users rely on WinZip, a popular shareware program, available from <a href="http://www.winzip.com/">http://www.winzip.com/</a>. There are many alternative compression utilities that are compatible with the <strong>.zip</strong> format. Since the <strong>.zip</strong> format is so commonly used for downloaded files, this procedure assumes you have a zip utility and know how to use it.  If not, download WinZip or an alternative and review the instructions. <h4 id="head-087b9a7349621ad696a29819ff9914b11b73373e">WinCVS, TortoiseCVS, or Neither</h4>
Because development snapshots of the <em>Nightly CVS tarball</em> and <em>Stable CVS tarball</em> of MoinMoin are now downloadable directly from SourceForge, few users will need to install a CVS utility. In general, the latest MoinMoin release will be the most stable and best documented choice for new users, <em>Stable CVS</em> should be trouble free and may have useful new features but may lack corresponding documentation, and <em>Nightly CVS</em> should be chosen only if you are a Python programmer and want to help test freshly coded features. <p>
CVS utilities are discussed here only because they are uncommon in the Windows environment, and many Windows users may not be familiar with them. If you intend to modify MoinMoin source code to add your own new features, then you may want to consider installing a CVS utility. CVS utilities allow you modify your local MoinMoin source code and automatically merge your changes with changes made by other developers when you update your local copy of the MoinMoin source code from the <em>CVS Head</em>. Even better, if you wish to submit your nifty new feature to the MoinMoin developers for inclusion in a future MoinMoin release, you can create a <em>patch</em> of your enhancement that a MoinMoin developer can easily install and test on their own local copy of the MoinMoin source. 
</p>
<p>
If you are unfamiliar with CVS or are not a Python programmer, your choice for now should definitely be <strong>Neither</strong>. You can always revisit this step later. While either CVS utility is easy to install, you should expect to spend a few days learning CVS concepts. 
</p>
<p>
WinCVS is probably the most widely installed CVS utility.  You can read more about it in <a class="interwiki" title="MoinMoin" href="http://moinmoin.wikiwikiweb.de/MoinMoinWinCvs"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMoin]" width="16" height="16">MoinMoinWinCvs</a>.  
</p>
<p>
TortoiseCVS is an add-on component for Microsoft's Windows Explorer. It works by changing the icons used for CVS-related folders and files and adds entries to the Windows Explorer menus. One advantage of TortoiseCVS for one-person development shops is that it can create and update a <em>CVS repository</em> for your own development projects. WinCVS requires a separate <em>CVS repository</em> utility to function and there are few/none available for Windows. You can learn more about TortoiseCVS at <a href="http://www.tortoisecvs.org/">http://www.tortoisecvs.org/</a>.  Don't be confused by the alternative TortoiseSVN product -- you will need TortoiseCVS. 
</p>
<p>
With either WinCVS or TortoiseCVS, you can install MoinMoin directly from your <tt>\CVSRoot\moin</tt> folder, just follow the installation instructions below as if you unzipped the current release into that folder.  Note there is a potential problem if you instruct WinCVS to mark files with the Read-Only attribute. The setup program will not work correctly the second time you try to reinstall MoinMoin from <tt>\CVSRoot\moin</tt> because it will fail while attempting to overwrite the Read-Only files from the prior installation. 
</p>
<h4 id="head-4a60061c6ad216d661baf0fb61c263690cd3653d">Installing Apache</h4>
<p>
To obtain the latest version of Apache, go to <a href="http://www.apache.org/">http://www.apache.org/</a>, and click on the link to <strong>HTTP Server</strong>. Find the link to download the <strong>Win32 Binary (MSI Installer)</strong> version. Read the Apache documentation to determine the correct installation procedure for your situation.  Questions and problems with the Apache installation process should be resolved through use of the resources provided by the Apache organization. Be sure your webserver runs correctly before proceeding.  
</p>
<p>
<strong>Warning:</strong> the procedure described above tends to trivialize the installation of the Apache web server. Apache can be installed and running on your PC in a very few minutes with only a cursory examination of the Apache documentation.  Before you undertake the installation of any web server that can be accessed through the internet, you should exercise a controlled level of paranoia and assess the potential damage that may be caused by hackers accessing or destroying sensitive data. This should include not only the all data which resides on the PC which will host the Apache web server, but all other PCs on the local LAN which participate in any form of file sharing.   
</p>
<p>
Windows/ME, 98SE, 98, 95, and probably NT should be considered inappropriate hosts for any Apache web server that can be accessed via the internet.  Use either Windows/2000 or XP and install all security patches available for your operating system. 
</p>
<p>
Do not let the above discourage you from installing MoinMoin.  Most of the internet activity probing your system for weaknesses will be from virus infected Windows/NT systems running IIS whose owners have neglected to apply available security patches. The starting Apache configuration is secure and you will not have a problem provided you: 
</p>

    <ul>

    <li>
<p>
 Regularly review and apply security patches for your installed software. 
</p>
</li>
    <li>
<p>
 Understand the ramifications of any changes you make to the Apache config files. 
</p>
</li>
    <li>
<p>
 Regularly review the Apache logs for suspicious activity. 
</p>
</li>
    <li>
<p>
 Regularly take backups of your data. 
</p>
</li>

    </ul>


<h4 id="head-e4ce45d479f9c28c42ec0fff53ad64c1fc1e1dfb">Installing Python</h4>
<p>
There are currently two different distributions of Python available for Windows. The normal Python distribution is available from <a href="http://www.python.org">http://www.python.org</a>.  This is distributed as a windows executable (.exe) file. 
</p>
<p>
An alternative distribution called <strong>ActivePython</strong> is available from <a href="http://www.activestate.com">http://www.activestate.com</a>. This distribution uses the MSI Installer and contains some tools specific to the Windows operating system and a popular Windows IDE called Pythonwin.  ActivePython is available for free; an email address is requested (but not required) before downloading. 
</p>
<p>
MoinMoin will work with either distribution, but requires Python release 2.0 or later.  Download and install the distribution of your choice.  Questions and problems dealing with the Python installation process should be resolved through the use of resources provided by Python.org or ActiveState.  Be sure your Python installation is correct before proceeding. 
</p>
<p>
For file locking, you will also need to download and install the <a class="external" href="http://starship.python.net/crew/mhammond/win32/Downloads.html"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">Win32 extensions for Python</a> (aka <tt>win32all</tt>). Choose the version matching the Python version you are using. The alternative ActivePython distribution discussed above include these extensions. 
</p>
<h3 id="head-4ae55a7c6b4551d23d7089f46872de4cc9fc93d3">Installing MoinMoin</h3>
Download the current version of MoinMoin from <a href="http://moin.sourceforge.net/">http://moin.sourceforge.net/</a> into <tt>C:\TEMP</tt> or an alternative location.  Be sure to choose the version in the <strong>.zip</strong> format rather than the <strong>.tgz</strong> or <strong>.tar.gz</strong> format. (If you have decided to install either the <em>stable CVS tarball</em> or <em>nightly CVS tarball</em> for some reason that makes sense to you, your zip utility may be able to read the <em>.tar.gz</em> format.  If not, try WinZip.) <p>
Using your favorite unzip utility discussed above, unzip the MoinMoin distribution file into the same folder.  You should then have a folder <tt>C:\TEMP\moin-x.x</tt> where "x.x" is the current release number. This folder will contain a <tt>setup.py</tt> file in addition to several other files and subfolders. 
</p>
<p>
Open an MS-DOS or console window and enter the commands: 
</p>

<pre>C:
cd \TEMP\moin-x.x
C:\Python\python setup.py install --record=install.log
</pre><p>
The above commands will add MoinMoin to your <tt>C:\Python</tt> installation and create an <tt>install.log</tt> file in <tt>C:\temp\moin-x.x</tt> listing all the copied files. You may use Windows Explorer to examine the newly created folders within <tt>C:\Python</tt>. You should find a <tt>C:\Python\share\moin</tt> folder with subfolders <tt>cgi-bin</tt>, <tt>data</tt>, and <tt>htdocs</tt>. If you have Python 2.0 or 2.1 you will find a folder <tt>C:\Python\MoinMoin</tt>, but with Python 2.2 and later it will be <tt>C:\Python\Lib\site-packages\MoinMoin</tt>. The <tt>MoinMoin</tt> folder contains many Python scripts and several subfolders. 
</p>
<p>
You are now ready to create a wiki instance. 
</p>
<h3 id="head-07dd036e6d83a2d5953199459b0ff8acce4b4858">Creating a Wiki Instance</h3>
It is a good practice to try to keep all of your personal or site specific data under a few root folders. This way you can easily backup your important data on a regular basis without having to waste time either backing up static files or picking out dozens of important folders scattered throughout your folder structure.  You should avoid placing your wiki data under the <tt>C:\Python</tt> folder so that you can later upgrade Python or MoinMoin without accidentally overwriting or deleting your wiki data.  For the same reason, you probably don't want to place your wiki data within the <tt>C:\Apache</tt> folder. The default personal folder under many Windows versions is called <tt>C:\My&nbsp;Documents</tt>.   <p>
Choose a location appropriate for you; the following instructions assume you will be creating one or more wiki instances in <tt>C:\Moin\</tt> and the first wiki instance will be named <tt>mywiki</tt>. 
</p>
<p>
You may replace the name <tt>mywiki</tt> with almost any name you wish, but do not use <tt>wiki</tt> because that is used by MoinMoin for loading standard images and style sheets. Although this can be changed later, the plan is that the name you choose for <tt>mywiki</tt> will become part of the url used to access your site, e.g. <tt>http://myorganization.org/mywiki/FrontPage</tt>. 
</p>
<p>
Start an MS-DOS or console window and enter the commands below. This will create a clone of the MoinMoin wiki in the mywiki folder. The <tt>wikidata</tt> folder will be used later for mywiki customization, such as logos and style sheets.  
</p>

<pre>cd C:\ 
md Moin
md Moin\wikidata
md Moin\mywiki
md Moin\mywiki\data
cd \Python\share\moin
xcopy data        C:\Moin\mywiki\data /E
copy  cgi-bin\*.* C:\Moin\mywiki\*.*
</pre><p>
If your server is going to run multiple wikis, you need to create additional clones. The commands below will create mywiki2.  The <tt>wikidata</tt> folder created above can contain custom logos and style sheets for all your wikis. 
</p>

<pre>cd C:\ 
md Moin\mywiki2
md Moin\mywiki2\data
cd \Python\share\moin
xcopy data        C:\Moin\mywiki2\data /E
copy  cgi-bin\*.* C:\Moin\mywiki2\*.*
</pre><p>
Use your editor to edit the file <tt>C:\Moin\mywiki\moin.cgi</tt>.  Change the first line (the shebang statement) to point to your local Python executable program. Note the forward slashes -- Apache uses the Unix convention for folder separators. This tells Apache the <tt>moin.cgi</tt> file is an executable script that will be interpreted by a program to be loaded from <tt>C:/Python/python</tt>. <pre>
#! C:/Python/python
</pre>
</p>
<p>
The next step is to tell Apache that is has more work to do. Use your editor to append the following lines to <tt>C:\Apache\conf\httpd.conf</tt>. Note the presence and absence of trailing slashes, it is important to enter the lines exactly as shown below. 
<pre>Alias       /wiki/     "C:/Python/share/moin/htdocs/"
Alias       /wikidata/ "C:/Moin/wikidata/"
ScriptAlias /mywiki    "C:/Moin/mywiki/moin.cgi"
</pre>
</p>
<p>
The <strong>Alias</strong> lines for <tt>wiki</tt> and <tt>wikidata</tt> above instructs Apache to serve images, style sheets, etc. from the specified folders and subfolders. The <strong>ScriptAlias</strong> line is needed once for each wiki instance, so if you have multiple wikis, repeat the statement using mywiki2, mywiki3, etc. The ScriptAlias statement instructs Apache to execute scripts from the specified folder. See the Apache docs for a complete explanation. 
</p>
<p>
Test your changes by restarting your Apache server and try to access your newborn wiki with the URL <tt>http://127.0.0.1/mywiki</tt>. You should see the FrontPage, try to edit and save it, and if that works, verify your edit is reflected on the RecentChanges page. 
</p>
<p>
Finally, edit <tt>C:\Moin\mywiki\moin_config.py</tt> and at least change <tt>sitename</tt> to the name of your wiki: 
<pre>sitename = 'My Wiki'
</pre>
</p>
<p>
If you want to replace the MoinMoin logo with one named <tt>mywikilogo.gif</tt>, copy your logo to <tt>C:\Moin\wikidata</tt> and change <tt>logo_url</tt> in <tt>moin_config.py</tt> as follows: 
<pre>logo_url = '/wikidata/mywikilogo.gif'
</pre>
</p>
<p>
For a personal or intranet installation, you'll normally also add this line to <tt>moin_config.py</tt>: 
<pre>allowed_actions = ['DeletePage', 'AttachFile']
</pre>
</p>
<p>
Additional configuration details can be found in <a href="http://moinmaster.wikiwikiweb.de/HelpOnConfiguration">HelpOnConfiguration</a>. 
</p>
<p>
And now, it is up to you and your user community to transform your wiki into an informative and useful tool. You will probably want to retain most of the HelpOn~ pages dealing with editing, delete those pages with irrelevant information (like this page, don't let your users or boss know how easy it was to install MoinMoin <img src="wiki/htdocs/classic/img/smile4.png" alt=";)" height="15" width="15"> ), and rewrite the FrontPage to introduce your wiki topic.  
</p>
<h3 id="head-285ec850c11d78bac10f6bfa31b69a37f1b257c9">Troubleshooting</h3>
The first place to look for clues when the unexpected happens is to try changing your url to: <tt>http://127.0.0.1/mywiki?test</tt>. If Apache can find and execute the module <tt>C:/Moin/mywiki/moin.cgi</tt>, a page of diagnostics titled <strong>MoinMoin CGI Diagnosis </strong> will be displayed. Check the output for error messages. <p>
The second place to look for is <tt>C:\Apache\logs\error.log</tt>. The following are common errors grouped by the message displayed by your browser. 
</p>
<h4 id="head-ffa5578af85cd8c29d2df2242dc504e3b2ba687d">Internal Server Error</h4>
<p>
If the Apache log shows a message "The system cannot find the file specified." then a possibility is the shebang statement in <tt>moin.cgi</tt> is incorrect. 
</p>
<p>
If the Apache log shows a different error message, then the MoinMoin Python scripts may be abending. To determine the cause, you could try temporarily renaming <tt>moin.cgi</tt> to <tt>moin.py</tt>, loading <tt>moin.py</tt> with the Python <strong>idle</strong> IDE and executing it to determine if there are any error messages. 
</p>
<h4 id="head-d205cbd6783332a212c5ae92d73c77178c2d2f28">Not Found</h4>
If the Apache error log shows the message "File does not exist: C:/Apache/htdocs/mywiki",  the <strong>ScriptAlias</strong> statement in <tt>httpd.conf</tt> may be incorrect. <h4 id="head-f77f846fcd197c87bb52077e10879eeb462a9a44">The Page Cannot be found</h4>
If the Apache error log shows the message "File does not exist: C:/Apache/htdocs/????", you may have mistyped the url "<a href="http://127.0.0.1/mywiki">http://127.0.0.1/mywiki</a>" into your browser. <h4 id="head-d420016870f156dc7564a07f1646a984aa68abd0">FrontPage Loads Without Icons</h4>
If the Apache Error log shows many error messages "File does not exist: C:/Apache/htdocs/wiki", then the <strong>Alias</strong> statement in <tt>httpd.conf</tt> may be incorrect. </div>
 <hr size="4">
 <a id="win32iis-install"> <hr size="4">
 <h2>Windows Installation using IIS</h2>
<div id="Include_HelpOnInstalling(2f)InternetInformationServer" lang="en" dir="ltr">
<strong>Index</strong> <ol>
<li>
<a href="#head-09a428f93ec07a73d726f8bd037ecacfaaf8b044">Requirements</a></li>
<li>
<a href="#head-a8bc382020aaaa716a496826f97b0c9d436c31a9">Preparation</a></li>
<ol>
<li>
<a href="#head-a0c86e10c581394466d224e30f847c91c6195b7b">Installing IIS</a></li>
<li>
<a href="#head-e4ce45d479f9c28c42ec0fff53ad64c1fc1e1dfb">Installing Python</a></li>
<li>
<a href="#head-4ae55a7c6b4551d23d7089f46872de4cc9fc93d3">Installing MoinMoin</a></li>
</ol>

<li>
<a href="#head-07dd036e6d83a2d5953199459b0ff8acce4b4858">Creating a Wiki Instance</a></li>
<ol>
<li>
<a href="#head-db88acbcebb217b8cda79eca3233ccb3be7adb84">IIS 6.0 (Windows.NET Server 2003)</a></li>
<li>
<a href="#head-285ec850c11d78bac10f6bfa31b69a37f1b257c9">Troubleshooting</a></li>
</ol>

</ol>

 <h3 id="head-09a428f93ec07a73d726f8bd037ecacfaaf8b044">Requirements</h3>
<p>
Before you install <a class="interwiki" title="MoinMoin" href="http://moinmoin.wikiwikiweb.de/MoinMoin"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMoin]" width="16" height="16">MoinMoin</a>, make sure you have the necessary infra-structure in place, namely the <em>Internet Information Services</em> webserver (any version should be OK), and a <em>Python</em> installation (version 2.3 or higher is recommended, don't run 2.0/2.1 without a compelling reason). 
</p>
<p>
In the following description, we assume that you have installed or will install things to these locations: 
</p>

    <ul>

    <li>
<p>
 IIS to its default location 
</p>
</li>
    <li>
<p>
 <tt>C:\Python</tt> - the Python interpreter 
</p>
</li>
    <li>
<p>
 <tt>C:\Moin</tt> - MoinMoin itself 
</p>
</li>

    </ul>


<p>
Quite often, you might want to install things elsewhere, which is no problem at all; you just have to adapt any paths that appear in a command or config file to the locations you have chosen. 
</p>
<p>
This installation procedure was tested with IIS 5 for Windows running on Windows 2000sp2, and using Python 2.2. 
</p>
<h3 id="head-a8bc382020aaaa716a496826f97b0c9d436c31a9">Preparation</h3>
<h4 id="head-a0c86e10c581394466d224e30f847c91c6195b7b">Installing IIS</h4>
<p>
You currently need an external webserver to run MoinMoin.  
</p>
<p>
From Microsoft: (<a href="http://www.microsoft.com/windows2000/en/server/iis/">http://www.microsoft.com/windows2000/en/server/iis/</a>) 
</p>

        <ul>

  To install IIS, add components, or remove components: <p>
  Click Start, point to Settings, click Control Panel and start the Add/Remove Programs application.    Select Configure Windows, click the Components button, and then follow the on-screen instructions    to install, remove, or add components to IIS.  
</p>

        </ul>


<p>
Make sure that your webserver runs without problems before you start to install MoinMoin; problems with your webserver installation are not in the scope of this document. 
</p>
<h4 id="head-e4ce45d479f9c28c42ec0fff53ad64c1fc1e1dfb">Installing Python</h4>
<p>
Download <a class="external" href="http://www.python.org/ftp/python/2.3.2/Python-2.3.2-1.exe"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">Python 2.3.2</a> and install it. Python installation is done via a standard Windows installer program. 
</p>
<p>
For file locking, you will also need to download and install the <a class="external" href="http://starship.python.net/crew/mhammond/win32/Downloads.html"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">Win32 extensions for Python</a> (aka <tt>win32all</tt>). Choose the version matching the Python version you are using. 
</p>
<h4 id="head-4ae55a7c6b4551d23d7089f46872de4cc9fc93d3">Installing MoinMoin</h4>
<p>
Before creating a wiki instance, you have to download and install the basic MoinMoin software. We assume you already have downloaded the distribution archive to the "<tt>C:\TEMP</tt>" directory<sup><a href="#fndef-7cc2e3a5ff47ba522321e43598b4c3d522bdad55-0" id="fnref-7cc2e3a5ff47ba522321e43598b4c3d522bdad55-0">1</a></sup>. 
</p>
<p>
Open a console window and enter the following commands: 
<pre>C:
cd \temp
unzip moin-1.1.zip
cd moin-1.1
python setup.py install --prefix=C:\Moin --record=install.log
</pre>
</p>
<p>
This will install all necessary files to the "<tt>C:\Moin</tt>" directory, and create a "<tt>install.log</tt>" file listing all the files that are created there. 
</p>
<p>
<div class="footnotes"><div></div><ul><li><span><a href="#fnref-7cc2e3a5ff47ba522321e43598b4c3d522bdad55-0" id="fndef-7cc2e3a5ff47ba522321e43598b4c3d522bdad55-0">1</a></span> If you want to install the current development version from CVS, replace "C:\TEMP" with your "moin" working directory.</li></ul></div> 
</p>
<h3 id="head-07dd036e6d83a2d5953199459b0ff8acce4b4858">Creating a Wiki Instance</h3>
<p>
You could run your wiki directly using the sample wiki created in "<tt>C:\Moin</tt>", but this is not recommended for two reasons: 
</p>

    <ol type="1">

    <li>
<p>
updating your wiki is more complicated and more dangerous. 
</p>
</li>
    <li>
<p>
creating a second wiki instance, even if you currently don't plan for one, is much easier. 
</p>
</li>

    </ol>


<p>
So, enter these commands in a console window: 
<pre>cd \Moin
md mywiki
md mywiki\data
xcopy share\moin\data mywiki\data /E
copy share\moin\cgi-bin mywiki
copy share\moin\htdocs\index.html mywiki\default.htm
</pre>
</p>
<p>
"<tt>mywiki</tt>" is the name of your wiki instance, you might want to chose a different name best fitting the intended use of this instance; just don't name it simply "<tt>wiki</tt>", because that would result in problems later on. 
</p>
<p>
We have to make sure that <tt>moin.cgi</tt> can find the MoinMoin directory, so that "<tt>import&nbsp;MoinMoin</tt>" will work. You can either setup a <tt>PYTHONPATH</tt> environment variable which includes the installation path, but sometimes it can be tricky to make sure the variable will be set in the CGI environment. The easiest way to make sure <tt>MoinMoin</tt> can be imported is to append to <tt>sys.path</tt> <em>within</em> <tt>moin.cgi</tt>. 
</p>
<p>
You can change the first two lines of code in moin.cgi to something like this: 
<script language='JavaScript'>
function isnumbered(obj){
  return obj.childNodes.length && obj.firstChild.childNodes.length && obj.firstChild.firstChild.className == 'LineNumber';
}
function nformat(num,chrs,add){
  var nlen = Math.max(0,chrs-(''+num).length), res = '';
  while (nlen>0) { res += ' '; nlen-- }
  return res+num+add;
}
function addnumber(did,nstart,nstep){
  var c = document.getElementById(did), l = c.firstChild, n = 1;
  if (!isnumbered(c))
    if (typeof nstart == 'undefined') nstart = 1;
    if (typeof nstep  == 'undefined') nstep = 1;
    n = nstart;
    while (l != null){
      if (l.tagName == 'SPAN'){
        var s = document.createElement('SPAN');
        s.className = 'LineNumber'
        s.appendChild(document.createTextNode(nformat(n,4,' ')));
        n += nstep;
        if (l.childNodes.length)
          l.insertBefore(s, l.firstChild)
        else
          l.appendChild(s)
      }
      l = l.nextSibling;
    }
  return false;
}
function remnumber(did){
  var c = document.getElementById(did), l = c.firstChild;
  if (isnumbered(c))
    while (l != null){
      if (l.tagName == 'SPAN' && l.firstChild.className == 'LineNumber') l.removeChild(l.firstChild);
      l = l.nextSibling;
    }
  return false;
}
function togglenumber(did,nstart,nstep){
  var c = document.getElementById(did);
  if (isnumbered(c)) {
    remnumber(did);
  } else {
    addnumber(did,nstart,nstep);
  }
  return false;
}
</script>
<div class="codearea"><script>document.write('<a href="#" onClick="return togglenumber(\'CA-f927e2fa1c21d5718212352216e661a509469818_000\',1,1);" class="codenumbers">1,2,3</a>')</script><pre id="CA-f927e2fa1c21d5718212352216e661a509469818_000" class="codearea"><span class="line"><span class="LineNumber">   1 </span><span class="ResWord">import</span> <span class="ID">sys</span></span>
<span class="line"><span class="LineNumber">   2 </span><span class="ID">sys</span><span class="Operator">.</span><span class="ID">path</span><span class="Operator">.</span><span class="ID">append</span><span class="Operator">(</span><span class="String">r'C:\Moin\Lib\site-packages'</span><span class="Operator">)</span><span class="Text"></span></span>
</pre><script>document.write('<a href="#" onClick="return togglenumber(\'CA-f927e2fa1c21d5718212352216e661a509469818_000\',1,1);" class="codenumbers">1,2,3</a>')</script></div> Notice that we're pointing to the directory which contains the MoinMoin directory, not the directory itself. 
</p>
<p>
Next, you'll need to create two virtual directories in IIS. One for the shared data, and one for this specific wiki instance.  
</p>
<p>
Go to <em>Control Panel =&gt; Administrative Tools =&gt; Internet Information Service</em>. Open up the tree to <em>Default Web Site</em>.  
</p>
<p>
Right click on <em>Default Web Site</em> and choose <em>New =&gt; Virtual directory</em>. This will bring up a wizard with the manditory useless first screen, hit next. Enter "<tt>wiki</tt>" for the alias name and hit next. Browse to "<tt>C:\Moin\share\moin\htdocs</tt>" and hit next. Leave the <em>Access permissions</em> at their defaults and hit next. And now you're done, hit finish! 
</p>
<p>
Now follow the same steps, but set the alias to "<tt>mywiki</tt>" and the path to "<tt>C:\Moin\mywiki</tt>".  
</p>
<p>
Now you need to setup the 'mywiki' alias so that it will run Python to interpret <tt>.cgi</tt> files. Right click on your new 'mywiki' alias and choose <em>Properties</em>. On the first tab (<em>Virtual Directory</em>), click the <em>Configuration</em> button. The first tab is the <em>App Mappings</em> tab, which defines which programs to use for each file exetension. Click <em>Add</em>. Browse to your <tt>python.exe</tt> (probably something like <tt>c:\pythonXX\python.exe</tt>). Then add <tt>-u&nbsp;%s&nbsp;%s</tt> after the Python executable path. The <em>Executable</em> line will look something like this: <tt>C:\Python22\python.exe&nbsp;-u&nbsp;%s&nbsp;%s</tt>. In the <em>Extension</em> box enter <tt>.cgi</tt> with the begining period. Confirm that the <em>Check that file exists</em> option is not checked (if it is, MoinMoin won't be able to display sub pages). Ok, you're done with the alias configuration, click <em>OK</em> several times to get back out of all the dialog boxes. 
</p>
<p>
If you add another wiki instance, you'll only need to setup the reference to its folder, they can safely share the "<tt>wiki</tt>" alias which points to static files only. 
</p>
<p>
That is all, try to access your new-born wiki with the URL "<tt>http://127.0.0.1/mywiki/</tt>". You should see the FrontPage, try to edit and save it, and if that works, see if your edit is reflected on the RecentChanges page. 
</p>
<p>
Finally, edit "<tt>moin_config.py</tt>" and at least change "<tt>sitename</tt>" and "<tt>logo_url</tt>" to some personal values: 
<pre>sitename = 'My Wiki'
logo_url = '/images/mywiki-logo.gif'
</pre>
</p>
For a personal or intranet installation, you'll normally also add the line 
<pre>allowed_actions = ['DeletePage', 'AttachFile']
</pre><h4 id="head-db88acbcebb217b8cda79eca3233ccb3be7adb84">IIS 6.0 (Windows.NET Server 2003)</h4>
<p>
The instructions below also apply to IIS 6.0 but the more aggressive security settings in newer version of IIS disallow the usage of <em>unknown CGI extensions</em>.  That means you will always get a 404 error unless you do this: 
</p>

    <ol type="1">

    <li>
<p>
Open "Internet Information Services (IIS)" in the control panel. 
</p>
</li>
    <li>
<p>
Go the the "Web Service Extensions" folder. 
</p>
</li>
    <li>
<p>
There you will see "All Unknown CGI Extensions" is probably set to "Prohibited".  Make it "Allowed" and <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> should now work. 
</p>
</li>

    </ol>


<p>
<em>At the time I'm writing this, I'm running Windows.NET Standard Server 2003 _RC1_.  It may be different in later version.  But if you get a 404 error on moin.cgi after following the regular steps, double-check that setting. -- <a class="interwiki" title="MoinMoin" href="http://moinmoin.wikiwikiweb.de/FrancoisDenisGonthier"><img src="wiki/htdocs/classic/img/moin-inter.png" alt="[MoinMoin]" width="16" height="16">FrancoisDenisGonthier</a></em> 
</p>
<p>
<em>Enabling "All Unknown CGI Extensions" can be a security hole. To just enable Python CGI scripts, add and enable a new web service extension where the 'required files' exactly match the path plus arguments as described above (e.g. <tt>C:\Python22\python.exe&nbsp;-u&nbsp;%s&nbsp;%s</tt>). You cannot have any spaces in the path to python.exe. There are also permission issues related to the user executing the moinmoin code (access to cmd.exe) which I have not yet sorted through. -- mb</em> 
</p>
<h4 id="head-285ec850c11d78bac10f6bfa31b69a37f1b257c9">Troubleshooting</h4>
<p>
If you see an error like "<tt>ImportError:&nbsp;No&nbsp;module&nbsp;named&nbsp;MoinMoin</tt>", it means that python cannot find MoinMoin. See above for how to set your <tt>PYTHONPATH</tt> or add to <tt>sys.path</tt>. 
</p>
<p>
If you see an error like Error 13: Permission Denied, it means that your web user permissions for the files do not have write/modify enabled. 
</p>
</div>
 <hr size="4">
 <a id="macosx-install"> <hr size="4">
 <h2>Mac OS X Installation using Apache</h2>
<div id="Include_HelpOnInstalling(2f)ApacheOnMacOsx" lang="en" dir="ltr">
<h3 id="head-f538efe79cacd54dd8dfa5afa397d3e7b624fd42">Installing MoinMoin on OS X</h3>
<p>
<img src="wiki/htdocs/classic/img/idea.png" alt="(!)" height="15" width="15"> You must not be afraid to use the terminal <img src="wiki/htdocs/classic/img/smile4.png" alt=";)" height="15" width="15"> 
</p>
<h4 id="head-a479c9c34e878d07b4d67a73a48f432ad7dc53c8">Download</h4>
<p>
Download the source on the Desktop. You should see a <tt>moin-x.x.tar.gz</tt> file. Extract this file on the desktop with Stuffit Expander, or from the terminal (faster and safer): 
<pre>cd ~/Desktop
tar -xzf moin-1.3.tar.gz
</pre>
</p>
<h4 id="head-fd6c3ebf7befca9f8208f86c76e4d4180303745c">Install</h4>
<p>
Use these commands in the terminal to install the MoinMoin wiki engine into the system. 
</p>
<p>
First, open a shell as root. You will need this to install <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> and configure the wiki. When asked, enter your password. 
<pre>sudo -s
... password:
</pre>Now you have root privileges in this shell. 
</p>
<p>
Install: 
<pre>cd moin-1.3
python setup.py install --record=install.log 
</pre>Now installation is finished. You will find a file <tt>install.log</tt> on the Desktop in the folder <tt>moin-1.3</tt>. 
</p>
<h4 id="head-fd919180e26f73db99013abf4927f0bbfb6c8af0">Creating a wiki</h4>
<p>
After you installed the software, you create a wiki. You may create several wikis if you need. 
</p>
<p>
First check what is the user and group name of the web server. The wiki files will belong to the web server (not to you): 
<pre>egrep "^User|^Group" /etc/httpd/httpd.conf
User www
Group www
</pre>You wil use these name soon... 
</p>
<p>
Now create a copy of the default wiki: 
<pre>cd /usr/share/moin/
mkdir mywiki
cp -r data mywiki
cp cgi-bin/* mywiki
chown -R www:www mywiki
chmod a+rx mywiki/*.cgi
</pre>
</p>
<p>
Configure Apache. We'll use the pico editor: 
<pre>pico /etc/httpd/httpd.conf
</pre>
</p>
<p>
Go the end of the Aliasess section and edit like the example below, (only the first two lines are added): 
<pre>    Alias /wiki/ "/usr/share/moin/htdocs/"      
    ScriptAlias /mywiki "/usr/share/moin/mywiki/moin.cgi"       

&lt;/IfModule&gt;
# End of aliases.
</pre>Use Control+O to save the file and Control+X to exit pico. 
</p>
<p>
Restart Apache - open System Preferences, go to the Sharing page, select "Personal Web Sharing" and click "Stop" then "Start". Or just type this instead: 
<pre>apachectl graceful
.... httpd gracefully restarted
</pre>
</p>
<p>
Now you finished the installation - exit from the shell with the root privileges - working as root is dangerous. 
<pre>exit
</pre>Now you are running again safely. 
</p>
<h4 id="head-0820b32b206b7352858e8903a838ed14319acdfd">Testing</h4>
<p>
In a web-browser surf to the site: <a href="http://127.0.0.1/mywiki">http://127.0.0.1/mywiki</a> 
</p>
<p>
You should see the FrontPage of your new wiki. 
</p>
<p>
Now run the unit tests, to make sure everything is fine. Go to this address: <a href="http://127.0.0.1/mywiki?test">http://127.0.0.1/mywiki?test</a> 
</p>
<p>
You should see a report on the wiki and various parts of the <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> engine. 
</p>
<h3 id="head-fce06e20e5f7f74aacccab40b59b75a56c8f7305">Comments</h3>
<p>
Here are a couple of issues with my Mac OS X install I needed to fix: 
</p>

    <ol type="1">

    <li>
<p>
The TWiki drawing jar file is not installed, so drawings do not work.  You have to find the twikidraw.jar file (download the latest stable <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> tar.gz file and uncompress like: <tt>tar&nbsp;xzvf&nbsp;moinmoin.tar.gz</tt>), and copy the twikidraw.jar file (under <tt>htdocs/applets/TWikiDrawPlugin</tt>) to this folder <tt>/usr/share/moin/htdocs/applets/TWikiDrawPlugin/</tt>. You'll probably need to use sudo: <br>
<tt>sudo&nbsp;cp&nbsp;twikidraw.jar&nbsp;/usr/share/moin/htdocs/applets/TWikiDrawPlugin/</tt><br>
 and set permissions:<br>
<tt>sudo&nbsp;chmod&nbsp;755&nbsp;/usr/share/moin/htdocs/applets/TWikiDrawPlugin/twikidraw.jar</tt> 
</p>
</li>
    <li class="gap">
<p>
The RSS feed for your <a href="http://moinmaster.wikiwikiweb.de/RecentChanges">RecentChanges</a> page may be broken.  You need to install the most recent version of <a class="external" href="http://sourceforge.net/projects/pyxml/"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">PyXML</a>.  Here's how I did so and the RSS feed was fixed.<br>
<tt>curl&nbsp;-O&nbsp;http://aleron.dl.sourceforge.net/sourceforge/pyxml/PyXML-0.8.3.tar.gz</tt><br>
<tt>tar&nbsp;xzvf&nbsp;PyXML-0.8.3.tar.gz</tt><br>
<tt>cd&nbsp;PyXML-0.8.3</tt><br>
<tt>sudo&nbsp;python&nbsp;setup.py&nbsp;--without-xpath&nbsp;build</tt><br>
<tt>sudo&nbsp;python&nbsp;setup.py&nbsp;install</tt> 
</p>
</li>
</ol>

</div>
 <hr size="4">
 <a id="fastcgi-install"> <hr size="4">
 <h2>FastCGI Setup using Apache</h2>
<div id="Include_HelpOnInstalling(2f)ApacheWithFastCgi" lang="en" dir="ltr">
<h3 id="head-f47ef6bed992bdfbe57f6613c5977eb4f1bb6cb7">Using MoinMoin with apache + mod_fastcgi</h3>
<p>
<a class="external" href="http://fastcgi.com"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">FastCGI</a> is a method which enables apache to communicate with long-running scripts. This has the advantage that the script is only started and initialized one time, and that data could be cached in memory from request to request, enhancing the performance of the CGI application. 
</p>
<h4 id="head-fa3a32e9c6a4d5571e33d8c9f9fb2e4f27218658">Deploying MoinMoin with apache + mod_fastcgi</h4>
<p>
To deploy <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> using FastCGI you need an apache with mod_fastcgi. Please refer to the documentation of mod_fastcgi how to build it. 
</p>
<p>
Follow the basic apache installation for your operating system as described in other parts of the <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> installation documentation. In places where the documentation refers to <tt>moin.cgi</tt> you use <tt>moin.fcg</tt> instead. Be sure that <strong>.fcg</strong> is handled by the FastCGI module (<tt>AddHandler&nbsp;fastcgi-script&nbsp;.fcg</tt> in your apache config). 
</p>
<p>
Normally apache will start CGI scripts with its own user and group, or with the user and group of the VirtualHost if you are using the suexec wrapper. To enable this with FastCGI you need to use <tt>FastCgiWrapper&nbsp;On</tt> in your apache config (see FastCGI Documentation). 
</p>
<p>
Be sure to restart your apache, after you changed py files (i.e. the config) for a running FastCGI server, or you won't see any changes! 
</p>
</div>
 <hr size="4">
 <a id="modpy-install"> <hr size="4">
 <h2>mod_python Setup using Apache</h2>
<div id="Include_HelpOnInstalling(2f)ApacheWithModPython" lang="en" dir="ltr">
<h3 id="head-b400163f3796e159c9d389533d35da5a131f6d17">Using MoinMoin with apache + mod_python</h3>
<p>
<a class="external" href="http://www.modpython.org/"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">mod_python</a> embeds the python interpreter into the apache server. This saves initialization time and the need of forking cgi scripts. It doesn't have the ability to run as different users. It will always run as the main apache user and group. Be sure that your wiki data files are accessible by your apache server! 
</p>
<p>
<img src="wiki/htdocs/classic/img/alert.png" alt="/!\" height="15" width="15"> mod_python versions before 3.1.3 have a bug in <tt>apache.resolve_object</tt> This bug is fixed in version 3.1.3 an will perhaps fixed in later 2.X releases for apache 1.3. 
</p>
<h4 id="head-e15eca845d1e95e11069bfded6295117b65b66b5">Deploying MoinMoin with mod_python</h4>
<p>
Follow the basic apache installation for your operating system as described in other parts of the <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> installation documentation. Don't copy <tt>moin.cgi</tt>, cause you won't need it. Be sure that the apache process can access the wiki data files (check <tt>User</tt> and <tt>Group</tt> in your <tt>apache.conf</tt>). 
</p>
<p>
Copy the sample <tt>moin_modpy.htaccess</tt> as <tt>.htaccess</tt> to the path below which your wiki instance should be found: 
</p>

<pre>cd /usr/local/share/moin
cp wiki/cgi-bin/moin_modpy.htaccess /path/to/your/docroot/.htaccess
</pre><p>
Check the <tt>.htaccess</tt> that the <tt>PythonPath</tt> matches your installation. It should contain the path where the <tt>moin_modpy.py</tt> wrapper is installed (Note: the wrapper does not have to be within your DOCROOT). You can also change the name of your instance (<tt>&lt;Files&nbsp;wikiname&gt;</tt>). 
</p>
<p>
Check sys.path of <tt>moin_modpy.py</tt>. It needs to find the <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> package (not needed if <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> is installed system wide) and your <tt>moin_config.py</tt>. 
</p>
<p>
In some cases you need to restart apache after changes to py files used by mod_python. Please refer to the mod_python documentation. +
</p>
<hr size="3">
 Note on moin_config.py: In contrast to a cgi installation data_dir = './data' is not working. You need to change it to full path. Edit "<tt>/usr/local/share/moin/mywiki/moin_config.py</tt>": 
<pre>sitename = 'My Wiki'
interwikiname = 'MyWiki'  #remember the quotes
data_dir = '/usr/local/share/moin/mywiki/data/'  #this needs to be a FULL path
</pre><h5 id="head-26d6122dd146eddcd9d4f23893d3e5b490e33558">reading of .htaccess</h5>
In SuSE Linux 9.0 reading of <tt>.htaccess</tt> is switched off by default in "<tt>/etc/apache2/http.conf</tt>" with  
<pre>* forbid access to the entire filesystem by default
&lt;Directory /&gt;
  Options None
  AllowOverride None
  Qrder deny, allow
  Deny from all
&lt;/Directory&gt;
</pre>To allow Apache processing your .htaccess file (in your document root) you have to modify "<tt>/etc/apache2/http.conf</tt>" (for SuSE it is  actually recommended to create a new "<tt>http.conf.local</tt>" and include it in "<tt>/etc/sysconfig/apache2</tt>"). 
<pre>&lt;Directory "/src/www/htdocs"
   # this is the document root in Suse
   AllowOverride All 
&lt;/Directory&gt;
</pre>-- added by <a class="nonexistent" href="http://moinmaster.wikiwikiweb.de/KonradBauckmeier">KonradBauckmeier</a> 25.03.2004 10:11 <h4 id="head-a06c9b4b1cbf579e75f8eb4b68fe70c8e7499083">Fixing the mod_python bug</h4>
<p>
<img src="wiki/htdocs/classic/img/alert.png" alt="/!\" height="15" width="15"> If you did use the wrapper setup from the previous section, you don't need to do this. 
</p>
<p>
mod_python has a small resolver bug in versions before 3.1.3. The method <tt>resolve_object</tt> in <tt>mod_python/apache.py</tt> checks the wrong object, and so the lookup for <tt>RequestModPy.run</tt> fails. You have two possibilities to live with it: either use the wrapper script <tt>moin_modpy.py</tt> or fix the bug. 
</p>
<p>
To fix it you need to change the method <tt>resolve_object</tt> (around line 551 for mod_python 3.1.2b) from 
</p>

<pre>        if silent and not hasattr(module, obj_str):
            return None
</pre><p>
to 
</p>

<pre>        if silent and not hasattr(obj, obj_str):
            return None
</pre><p>
This bug is currently in all versions of mod_python before 3.1.3. It might be fixed in a next 2.X release for apache 1.3, too. 
</p>
<h4 id="head-93219016fff2e6cb59baf90b4905be672ffd2513">Deploying with a fixed mod_python</h4>
<p>
<img src="wiki/htdocs/classic/img/alert.png" alt="/!\" height="15" width="15"> This section only works with a fixed mod_python (see previous section)! 
</p>
<p>
Follow the deployment documentation above. Use the special commented out section of <tt>moin_modpy.htaccess</tt> instead of the default wrapper using part. 
</p>
<p>
Check the <tt>PythonPath</tt> in the <tt>.htaccess</tt> that it matches your installation. It should contain the python lib path where the <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> package is stored (not needed if <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> is installed system wide) and the path to your <tt>moin_config.py</tt>. 
</p>
<p>
The wrapper script <tt>moin_modpy.py</tt> is not needed, cause the RequestModPy class is used directly by mod_python. 
</p>
<h2 id="head-63e9b63ddd28e1b057cc6c2c728c018939699cab">Installing to base root with ModPython</h2>
<p>
None of the above instructions work if you want to make <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> work at the base url and use <a class="nonexistent" href="http://moinmaster.wikiwikiweb.de/ModPython">ModPython</a> (i.e. <a href="http://www.myserver.com/">http://www.myserver.com/</a> and not <a href="http://www.myserver.com/wiki">http://www.myserver.com/wiki</a> ).  Here is what worked for me for setting up <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> for use with multiple virtual servers (these are instructions for modpython 3.1.3 or later): 
</p>
<p>
<strong>Remember to replace "wiki1" in all these instructions with whatever name you chose.</strong> 
</p>
<p>
I keep the folders for the various wikis as subdirectories of /usr/share/moin.  Similar to the regular install instructions, do this after running <tt>python&nbsp;setup.py&nbsp;install</tt> for moinmoin: <pre>cd /usr/share/moin (or /usr/local/share/moin) 
mkdir wiki1  (change "wiki1" to whatever unique name you want to give the folder)
cp -r data wiki1
cp cgi-bin/moin_config.py wiki1  (this is the only file you need)
chown -R www-data:www-data wiki1 (use the user and group of apache)
</pre>
</p>
<p>
Edit your apache configuration file to allow the moin parent folder to override FileInfo at least: 
<pre>&lt;Directory "/usr/share/moin"&gt;
 Options Indexes Includes FollowSymLinks MultiViews
 AllowOverride All  #you need to allow FileInfo at least
 Order allow,deny
 Allow from all
&lt;/Directory&gt;
</pre>
</p>
<p>
For your server or virtual host, you need to set at least the two Aliases: 
<pre>&lt;VirtualHost your.ip.address&gt;
    ServerName your.server.name
    DocumentRoot /usr/share/moin/wiki1  #not really necessary
    ServerAdmin webmaster@your.server.name

    #This next line allows shared moinmoin images to load
    Alias /wiki/ "/usr/share/moin/htdocs/"

    #This is the line that passes a name to your python handler,
    #  the trailing slash is necessary
    Alias / "/usr/share/moin/wiki1/mywiki/"
&lt;/VirtualHost&gt;
</pre>
</p>
<p>
Edit /usr/share/moin/wiki1/moin_config.py: 
<pre>sitename = 'My Wiki'
interwikiname = 'MyWiki'  #remember the quotes
data_dir = '/usr/share/moin/wiki1/data/'  #this needs to be a FULL path
</pre>
</p>
<p>
And most importantly, you need to add an .htaccess file under /usr/share/moin/wiki1/ (or else add these lines to your main httpd.conf file: 
<pre># PythonDebug On
&lt;Files mywiki&gt;
  SetHandler python-program
  PythonPath "['/usr/share/moin/wiki1/']+sys.path"
  PythonHandler MoinMoin.request::RequestModPy.run
&lt;/Files&gt;
</pre>
</p>
<p>
The only problem I have is <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> is not outputting the html for the page info icons.  Icons work though.  It may be a <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> bug.  To temporarily fix this, I just changed this line in /usr/lib/python2.3/site-packages/<a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a>/theme/classic.py: 
<pre>#        if config.page_iconbar and self.request.user.show_toolbar and d['page_name']:
# change to just:
        if 1:
</pre>
</p>
<p>
Actually, there is another problem too, seemingly related to sessions and cookies.  The page trails doesn't show up when I am logged in, and if I quit and restart the browser and go back to the site, I am no longer automatically logged in like with the cgi version of <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a>. 
</p>
</div>
 <hr size="4">
 <a id="twisted-install"> <hr size="4">
 <h2>Setup using Twisted</h2>
<div id="Include_HelpOnInstalling(2f)TwistedWeb" lang="en" dir="ltr">
<h3 id="head-fc373a72e7888d37d96d64b7036eaeb8541872e0">Using MoinMoin with Twisted</h3>
<p>
<a class="external" href="http://twistedmatrix.com"><img src="wiki/htdocs/classic/img/moin-www.png" alt="[WWW]" width="11" height="11">Twisted</a> is a standalone python framework for many kinds of applications. For <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a>, we use twisted as a python web server that just imports <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a> persistently. 
</p>
<p>
This has the advantage that the Python interpreter and all Python scripts (including twisted itself and also <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a>) is only loaded and initialized one time, and that data can be cached in memory from request to request, enhancing the performance of <a href="http://moinmaster.wikiwikiweb.de/MoinMoin">MoinMoin</a>. 
</p>
<p>
Another advantage is that this is all based on Python. <img src="wiki/htdocs/classic/img/smile4.png" alt=";)" height="15" width="15"> 
</p>
<h4 id="head-a475664d7b6601239522938c16e8c191f6a0ebd8">Deploying MoinMoin with Twisted</h4>
<p>
First install twisted (see URL above). Many Linux distributions have twisted packages. Please refer to the documentation of twisted how to install it. 
</p>
<p>
Now see <tt>wiki/cgi-bin/moin_twisted.sh</tt> - maybe you have to slightly adapt the command in there. 
</p>
<p>
Also check <tt>wiki/cgi-bin/moin_twisted.py</tt> - change the settings in the upper script section to fit your needs. 
</p>
<p>
After setting up your own data directory somewhere, try starting moin_twisted.sh - your wiki should be running now. 
</p>
</div>
 </div>
</body>
</html>

